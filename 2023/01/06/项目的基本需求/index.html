<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>项目的基本需求 | 后来~</title><meta name="author" content="后来~"><meta name="copyright" content="后来~"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="项目的一些基本操作后台管理项目的基本流程1.项目构建12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273741.vue create  xxx &#x2F;&#x2F;用vue create创建项目">
<meta property="og:type" content="article">
<meta property="og:title" content="项目的基本需求">
<meta property="og:url" content="http://example.com/2023/01/06/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%9C%80%E6%B1%82/index.html">
<meta property="og:site_name" content="后来~">
<meta property="og:description" content="项目的一些基本操作后台管理项目的基本流程1.项目构建12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273741.vue create  xxx &#x2F;&#x2F;用vue create创建项目">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://source.fomal.cc/img/default_cover_10.webp">
<meta property="article:published_time" content="2023-01-06T05:23:00.000Z">
<meta property="article:modified_time" content="2023-01-04T06:10:00.000Z">
<meta property="article:author" content="后来~">
<meta property="article:tag" content="vue2的相关问题">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://source.fomal.cc/img/default_cover_10.webp"><link rel="shortcut icon" href="https://pic.imgdb.cn/item/63b77f5cbe43e0d30e87b228.png"><link rel="canonical" href="http://example.com/2023/01/06/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%9C%80%E6%B1%82/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '项目的基本需求',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-01-04 14:10:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/cat.css"><link rel="stylesheet" href="/css/emoji.css"><span id="fps"></span><div id="myscoll"></div><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.imgdb.cn/item/63b77d4fbe43e0d30e84900b.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://source.fomal.cc/img/default_cover_10.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">后来~</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">项目的基本需求</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-01-06T05:23:00.000Z" title="发表于 2023-01-06 13:23:00">2023-01-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-01-04T06:10:00.000Z" title="更新于 2023-01-04 14:10:00">2023-01-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">20.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>88分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="项目的基本需求"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"></section><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="项目的一些基本操作"><a href="#项目的一些基本操作" class="headerlink" title="项目的一些基本操作"></a>项目的一些基本操作</h1><h1 id="后台管理项目的基本流程"><a href="#后台管理项目的基本流程" class="headerlink" title="后台管理项目的基本流程"></a>后台管理项目的基本流程</h1><h2 id="1-项目构建"><a href="#1-项目构建" class="headerlink" title="1.项目构建"></a>1.项目构建</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>vue create  xxx <span class="comment">//用vue create创建项目</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>&lt;!--css预处理器的安装sass,less--&gt;</span><br><span class="line">npm i sass-loader@<span class="number">7</span> node-sass@<span class="number">4</span> -S</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>&lt;!--less的安装--&gt;</span><br><span class="line">npm i less@<span class="number">3</span> less-loader@<span class="number">7</span> -S</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>&lt;!--css的样式重置官网可以将页面初始化--&gt;</span><br><span class="line">官网:<span class="attr">https</span>:<span class="comment">//meyerweb.com/eric/tools/css/reset/</span></span><br><span class="line">在 assets 中新建一个 css 文件创建一个 reset.<span class="property">css</span> 将代码引入，在 app.<span class="property">vue</span> 中的样式中进行引入@<span class="keyword">import</span> <span class="title function_">url</span>(<span class="string">&quot;./assets/css/reset.css&quot;</span>);<span class="comment">//可以使页面初始化</span></span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>&lt;!--引入字体图标安装命令 在main.<span class="property">js</span>中引入字体图标库，在网页中使用--&gt;</span><br><span class="line">npm i -D font-awesome</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;font-awesome/css/font-awesome.min.css&#x27;</span><span class="comment">//在main.js中引入</span></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>!--引入axios请求命令的安装，在main.<span class="property">js</span>中全局引入axios，将axios挂载到原型上，后续可以将二次axios引入进来--&gt;</span><br><span class="line">npm i axios -S</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>新建一个server.<span class="property">js</span>的文件，里面写上二次封装axios，并且将其在main.<span class="property">js</span>中引入</span><br><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">&quot;./service&quot;</span>; <span class="comment">//引入二次封装axios</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">service</span> = service;</span><br><span class="line"></span><br><span class="line"><span class="number">8.</span>引入element-ui可以全局也可以按需引入详细看官网</span><br><span class="line">npm i element-ui -S<span class="comment">//全局注册</span></span><br><span class="line">&lt;!--可以全局引入也可以按需引入，在main.<span class="property">js</span>中直接使用--&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">9.</span>&lt;!--引入安装路由router，并且创建router文件,引入并创建相关的也能用，最后在main.<span class="property">js</span>中全局引入router，并且挂载在vue的原型上--&gt;</span><br><span class="line">npm i vue-router@<span class="number">3.5</span><span class="number">.3</span> -S</span><br><span class="line"><span class="comment">//全局引入router</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router, <span class="comment">//在渲染之前挂载到vue上</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">10.</span>&lt;!--配置完路由要在app.<span class="property">vue</span>中设置出口router-view--&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="number">11.</span>&lt;!--在router中舍弃掉以前的<span class="keyword">import</span>引入的方式在路由中使用懒加载引用--&gt;</span><br><span class="line"><span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../components/Home&#x27;</span>) <span class="comment">//路由懒加载的形式</span></span><br><span class="line"></span><br><span class="line"><span class="number">12.</span>&lt;!--推荐正则的插件any-rule ,在页面中按下f1--&gt;</span><br><span class="line">    </span><br><span class="line"><span class="number">13.</span>跨域请求的先创建vue.<span class="property">config</span>.<span class="property">js</span>文件</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">        <span class="comment">//帮忙给转发到的目标服务器</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&quot;http://1.116.64.64:5004/api2/&quot;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,<span class="comment">//是否允许跨域</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="number">14.</span>创建api，在里面写上请求的接口</span><br><span class="line"><span class="comment">//项目中我们一般都会把对应的接口请求封装成api来调用</span></span><br><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">&quot;../service.js&quot;</span>;</span><br><span class="line"><span class="comment">//封装登录接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">service</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">    data,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-登录的过程"><a href="#2-登录的过程" class="headerlink" title="2.登录的过程"></a>2.登录的过程</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>登录页先创建login，在router里面创建login路由</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">      <span class="attr">name</span>:<span class="string">&quot;首页&quot;</span>,</span><br><span class="line">      <span class="attr">hidden</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../components/Login&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="number">2.</span>在login页面中，用element-ui中的表单和卡片进行创建样式</span><br><span class="line">      &lt;el-card <span class="keyword">class</span>=<span class="string">&quot;box-card&quot;</span>&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>后台管理系统<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;form&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;密码&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;login(&#x27;form&#x27;)&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">      </span><br><span class="line"><span class="number">3.</span>最重要的就是登录的表单验证，对每一个表单要进行规则验证</span><br><span class="line">:model=<span class="string">&quot;form&quot;</span> ref=<span class="string">&quot;form&quot;</span> :rules=<span class="string">&quot;rules&quot;</span></span><br><span class="line">      </span><br><span class="line"><span class="number">4.</span>通过props来绑定规则的对象</span><br><span class="line">prop=<span class="string">&quot;username&quot;</span>  prop=<span class="string">&quot;password&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>将登录的校验规则进行封装，创建一个utils文件，里面写上封装的组件</span><br><span class="line"><span class="comment">//用户名匹配</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">nameRule</span>(<span class="params">rule, value, callback</span>) &#123;</span><br><span class="line">    <span class="comment">//用正则校验 ，请输入4-10位的昵称</span></span><br><span class="line">    <span class="keyword">let</span> reg = <span class="regexp">/(^[a-zA-Z0-9]&#123;4,10&#125;$)/</span>;</span><br><span class="line">    <span class="keyword">if</span> (value === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">        <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;请输入用户名&quot;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!reg.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">        <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;请输入4-10位用户名&quot;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">callback</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">      </span><br><span class="line"><span class="number">6.</span>在data中将用户收集的信息进行存放</span><br><span class="line"><span class="attr">form</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>定义rulr规则</span><br><span class="line"> <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: [&#123; <span class="attr">validator</span>: nameRule, <span class="attr">trigger</span>: <span class="string">&quot;blur&quot;</span> &#125;],</span><br><span class="line">        <span class="attr">password</span>: [&#123; <span class="attr">validator</span>: passRule, <span class="attr">trigger</span>: <span class="string">&quot;blur&quot;</span> &#125;],</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line"><span class="number">8.</span>登录页面封装token，因为要经常存入token和拿出来，并且登录成功后将用户信息返回回来</span><br><span class="line"><span class="number">9.</span>先创建一个setToken的文件，写上封装token的方法，将token放到<span class="variable language_">localStorage</span>进行保存，拿出，移除</span><br><span class="line"><span class="comment">//封装token,存入token</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setToken</span>(<span class="params">tokenKey, token</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(tokenKey, token)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">10.</span>在登录页面引入文件，在登录上创建点击事件，这种请求是没有用到vuex的情况直接引用接口</span><br><span class="line"><span class="keyword">import</span> &#123; nameRule, passRule &#125; <span class="keyword">from</span> <span class="string">&quot;../utils/vaildate.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; setToken &#125; <span class="keyword">from</span> <span class="string">&quot;../utils/setToken.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; login &#125; <span class="keyword">from</span> <span class="string">&quot;../api/api.js&quot;</span>;</span><br><span class="line">     </span><br><span class="line"><span class="number">11.</span>在message中写上登录请求，先检验form表单用validate方法，然后判断检验是否通过，如果通过就向后台发送请求，将表单提交，如果请求成功则将信息存入setToken中，setToken即为封装的token，保存到<span class="variable language_">localStorage</span>,并提示登录成功，然后跳转到首页，否则提示登录失败，或者是检验失败</span><br><span class="line"><span class="title function_">login</span>(<span class="params">form</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>[form].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>, form);</span><br><span class="line">          <span class="title function_">login</span>(<span class="variable language_">this</span>.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">              <span class="title function_">setToken</span>(<span class="string">&quot;username&quot;</span>, res.<span class="property">data</span>.<span class="property">username</span>);</span><br><span class="line">              <span class="title function_">setToken</span>(<span class="string">&quot;token&quot;</span>, res.<span class="property">data</span>.<span class="property">token</span>);</span><br><span class="line">              <span class="variable language_">this</span>.$message(&#123; <span class="attr">message</span>: res.<span class="property">data</span>.<span class="property">message</span>, <span class="attr">type</span>: <span class="string">&quot;success&quot;</span> &#125;);</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&quot;/home&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="variable language_">this</span>.<span class="property">form</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line">登录所遇到的几大坑。</span><br><span class="line"><span class="number">1.</span>遇到背景图无法铺满整个屏幕要将app.<span class="property">vue</span>的全局样式的上边距改为<span class="number">0</span></span><br><span class="line">     </span><br><span class="line"><span class="number">2.</span>要下载core.<span class="property">js</span>防止报错无法运行 npm i core-js  </span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>当你什么都搞好但是出现报错一直显示<span class="number">404</span>。无法跳转到首页，这个时候要重新启动项目</span><br></pre></td></tr></table></figure>
<h2 id="3-首页的过程"><a href="#3-首页的过程" class="headerlink" title="3.首页的过程"></a>3.首页的过程</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>构建首页的布局，因为首页包括了头部，底部，侧边栏，面包屑，分页面，所以将这些组件分为子组件，然后在首页进行引入，我们用到element-ui的布局方式。将子组件注册定义使用。</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;home&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Header</span>&gt;</span><span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-container</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Menu</span>&gt;</span><span class="tag">&lt;/<span class="name">Menu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Bread</span>&gt;</span><span class="tag">&lt;/<span class="name">Bread</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cont&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Footer</span>&gt;</span><span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&quot;./common/Header.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Footer</span> <span class="keyword">from</span> <span class="string">&quot;./common/Footer.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Menu</span> <span class="keyword">from</span> <span class="string">&quot;./common/Menu.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Bread</span> <span class="keyword">from</span> <span class="string">&quot;./common/Breadcrumb.vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Home&quot;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">Header</span>,</span><br><span class="line">    <span class="title class_">Footer</span>,</span><br><span class="line">    <span class="title class_">Menu</span>,</span><br><span class="line">    <span class="title class_">Bread</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>侧边栏放着是子路由，所以我在compoments中创建子路由，并且在router中将要展示的第一个路由为重定向并且在下面写上子路由</span><br><span class="line"> &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;学生管理&quot;</span>,</span><br><span class="line">      <span class="attr">iconClass</span>: <span class="string">&quot;fa fa-users&quot;</span>,</span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&quot;/home/student&quot;</span>, <span class="comment">//重定向</span></span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../components/Home&quot;</span>),</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;/home/student&quot;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;学生列表&quot;</span>,</span><br><span class="line">          <span class="attr">iconClass</span>: <span class="string">&quot;fa fa-list&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../components/students/StudentList&quot;</span>),</span><br><span class="line">          <span class="attr">meta</span>:&#123;<span class="attr">title</span>:<span class="string">&#x27;学生列表&#x27;</span>&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;/home/inter&quot;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;信息列表&quot;</span>,</span><br><span class="line">          <span class="attr">iconClass</span>: <span class="string">&quot;fa fa-list-alt&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../components/students/interList&quot;</span>),</span><br><span class="line">          <span class="attr">meta</span>:&#123;<span class="attr">title</span>:<span class="string">&#x27;信息列表&#x27;</span>&#125;</span><br><span class="line">          </span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;/home/infos&quot;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;信息管理&quot;</span>,</span><br><span class="line">          <span class="attr">iconClass</span>: <span class="string">&quot;fa fa-list-alt&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../components/students/infoLists&quot;</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;/home/work&quot;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;作业列表&quot;</span>,</span><br><span class="line">          <span class="attr">iconClass</span>: <span class="string">&quot;fa fa-list-ul&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../components/students//WorkList&quot;</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;/home/works&quot;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;作业管理&quot;</span>,</span><br><span class="line">          <span class="attr">iconClass</span>: <span class="string">&quot;fa fa-th-list&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../components/students/WorkMent&quot;</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="number">3.</span>路由创建完可以开始写头部的样式信息，比较简单，头部的用户要在creat中去拿到token里的用户信息，因为登录的时候已经保存到了locostorge中</span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/setToken.js&quot;</span>;</span><br><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="title function_">getToken</span>(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="number">4.</span>头部写完写底部，比较简单，加一些样式即可</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>侧边栏，侧边栏用到了element-ui的样式，然后获取当前的所有的路由，然后开始渲染一级路由和二级路由。</span><br><span class="line">   &lt;div <span class="keyword">class</span>=<span class="string">&quot;menu&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">&quot;200px&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-menu</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">router</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">default-active</span>=<span class="string">&quot;2&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">class</span>=<span class="string">&quot;el-menu-vertical-demo&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">background-color</span>=<span class="string">&quot;#2578b5&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">text-color</span>=<span class="string">&quot;#fff&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">active-text-color</span>=<span class="string">&quot;#ffd04b&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in menus&quot;</span>&gt;</span>  //一级路由的遍历</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">:index</span>=<span class="string">&quot;index + &#x27;&#x27;&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;!item.hidden&quot;</span>&gt;</span>//对应的路由地址点击切换</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">:class</span>=<span class="string">&quot;item.iconClass&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-menu-item-group</span>  //<span class="attr">二级路由遍历</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">v-for</span>=<span class="string">&quot;(child, index) in item.children&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">:index</span>=<span class="string">&quot;child.path&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">:class</span>=<span class="string">&quot;child.iconClass&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;&#123; child.name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">el-menu-item-group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt; </span><br><span class="line"></span><br><span class="line">            </span><br><span class="line"> <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">menus</span>: [],<span class="comment">//创建一个空数组</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$router</span>.<span class="property">options</span>.<span class="property">routes</span>); <span class="comment">//查看所有得路由</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">matched</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">menus</span> = [...<span class="variable language_">this</span>.<span class="property">$router</span>.<span class="property">options</span>.<span class="property">routes</span>];<span class="comment">//将所有的路由放到空数组里面进行展开，方便后面遍历</span></span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line"><span class="number">6.</span>侧边栏写完开始写面包屑，运用到$route.<span class="property">matche</span>方法得到当前点击的路由对象，并且将其遍历</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-breadcrumb</span> <span class="attr">separator-class</span>=<span class="string">&quot;el-icon-arrow-right&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; path: &#x27;/&#x27; &#125;&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in $route.matched&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span>&#123;&#123;item.name&#125;&#125;&lt;/el-breadcrumb-item</span></span><br><span class="line"><span class="language-xml">          &gt;  </span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-breadcrumb</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="4-二级路由的编写-学生列表"><a href="#4-二级路由的编写-学生列表" class="headerlink" title="4.二级路由的编写(学生列表)"></a>4.二级路由的编写(学生列表)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>利用element-ui去构建样式，利用form表单和表格(el-table)以及分页构建样式</span><br><span class="line">&lt;el-form</span><br><span class="line">      :inline=<span class="string">&quot;true&quot;</span></span><br><span class="line">      :model=<span class="string">&quot;formInline&quot;</span></span><br><span class="line">      <span class="keyword">class</span>=<span class="string">&quot;demo-form-inline&quot;</span></span><br><span class="line">      size=<span class="string">&quot;small&quot;</span></span><br><span class="line">    &gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">v-model</span>=<span class="string">&quot;formInline.name&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">placeholder</span>=<span class="string">&quot;请输入姓名查询&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;find&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!--<span class="number">1</span>:<span class="number">1</span>-<span class="number">10</span> <span class="number">2</span>:<span class="number">11</span>-<span class="number">20</span> <span class="title function_">slice</span>(当前页数 - <span class="number">1</span>)*每页条数,当前的页数*当前条数--&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;compData&quot;</span> <span class="attr">border</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span>//:data=&quot;tableData&quot;渲染初始化数据</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;sex_text&quot;</span> <span class="attr">label</span>=<span class="string">&quot;性别&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;age&quot;</span> <span class="attr">label</span>=<span class="string">&quot;年龄&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;number&quot;</span> <span class="attr">label</span>=<span class="string">&quot;学号&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;class&quot;</span> <span class="attr">label</span>=<span class="string">&quot;班级&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;state_text&quot;</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">label</span>=<span class="string">&quot;联系方式&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            @<span class="attr">click</span>=<span class="string">&quot;del(scope.row)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">icon</span>=<span class="string">&quot;el-icon-delete&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    &lt;!--分页--&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-pagination</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      @<span class="attr">size-change</span>=<span class="string">&quot;handleSizeChange&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:current-page</span>=<span class="string">&quot;currentPage&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:page-sizes</span>=<span class="string">&quot;[5, 10, 20, 30]&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">layout</span>=<span class="string">&quot;total, sizes, prev, pager, next, jumper&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>//<span class="attr">总条数</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>在api写请求数据</span><br><span class="line"><span class="comment">//学生列表的查询接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">students</span>(<span class="params">params</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">service</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/students&quot;</span>,</span><br><span class="line">    params,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//学生列表的删除接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">studentDel</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">service</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;delete&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/students/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>进行请求数据并且将数据渲染</span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">tableData</span>: [],将请求的数据进行保存</span><br><span class="line">      <span class="attr">currentPage</span>: <span class="number">1</span>, <span class="comment">//当前的页数</span></span><br><span class="line">      <span class="attr">pageSize</span>: <span class="number">10</span>, <span class="comment">//每页显示的条数</span></span><br><span class="line">      <span class="attr">total</span>: <span class="number">0</span>, <span class="comment">//总条数</span></span><br><span class="line">      <span class="attr">formInline</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getData</span>();<span class="comment">//将方法放到mouted中进行调用</span></span><br><span class="line">  &#125;,</span><br><span class="line"><span class="number">4.</span> 在methords中进行使用方法请求数据</span><br><span class="line"> <span class="title function_">getData</span>(<span class="params">params</span>) &#123;</span><br><span class="line">      <span class="title function_">students</span>(params).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;<span class="comment">//请求数据</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span>;<span class="comment">//将数据中的总条数放到总条数中</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">data</span>;<span class="comment">//将数据放到tableData中</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">tableData</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">            item.<span class="property">sex</span> === <span class="number">1</span> ? (item.<span class="property">sex_text</span> = <span class="string">&quot;男&quot;</span>) : (item.<span class="property">sex_text</span> = <span class="string">&quot;女&quot;</span>);</span><br><span class="line">            item.<span class="property">state</span> === <span class="string">&quot;1&quot;</span></span><br><span class="line">              ? (item.<span class="property">state_text</span> = <span class="string">&quot;已入学&quot;</span>)</span><br><span class="line">              : item.<span class="property">state</span> === <span class="string">&quot;2&quot;</span></span><br><span class="line">              ? (item.<span class="property">state_text</span> = <span class="string">&quot;未入学&quot;</span>)</span><br><span class="line">              : (item.<span class="property">state_text</span> = <span class="string">&quot;休学中&quot;</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"> <span class="number">5.</span>将分页的数据进行保存并且将数据渲染</span><br><span class="line">  <span class="attr">currentPage</span>: <span class="number">1</span>, <span class="comment">//当前的页数</span></span><br><span class="line">      <span class="attr">pageSize</span>: <span class="number">10</span>, <span class="comment">//每页显示的条数</span></span><br><span class="line">      <span class="attr">total</span>: <span class="number">0</span>, <span class="comment">//总条数</span></span><br><span class="line">          </span><br><span class="line"> <span class="number">6.</span>数据上的性别和状态均已数字代替，此时需要进行判断遍历返回给item进行重新渲染</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">tableData</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;<span class="comment">//将数据进行遍历</span></span><br><span class="line">            item.<span class="property">sex</span> === <span class="number">1</span> ? (item.<span class="property">sex_text</span> = <span class="string">&quot;男&quot;</span>) : (item.<span class="property">sex_text</span> = <span class="string">&quot;女&quot;</span>);</span><br><span class="line">            item.<span class="property">state</span> === <span class="string">&quot;1&quot;</span></span><br><span class="line">              ? (item.<span class="property">state_text</span> = <span class="string">&quot;已入学&quot;</span>)</span><br><span class="line">              : item.<span class="property">state</span> === <span class="string">&quot;2&quot;</span></span><br><span class="line">              ? (item.<span class="property">state_text</span> = <span class="string">&quot;未入学&quot;</span>)</span><br><span class="line">              : (item.<span class="property">state_text</span> = <span class="string">&quot;休学中&quot;</span>);</span><br><span class="line">          &#125;);</span><br><span class="line"><span class="number">7.</span>点击下一页和每页的条数进行渲染，用计算属性slice对数据进行切割并返回 </span><br><span class="line"> &lt;!--<span class="number">1</span>:<span class="number">1</span>-<span class="number">10</span> <span class="number">2</span>:<span class="number">11</span>-<span class="number">20</span> <span class="title function_">slice</span>(当前页数 - <span class="number">1</span>)*每页条数,当前的页数*当前条数--&gt;</span><br><span class="line"> <span class="title function_">compData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">tableData</span>.<span class="title function_">slice</span>(</span><br><span class="line">        (<span class="variable language_">this</span>.<span class="property">currentPage</span> - <span class="number">1</span>) * <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentPage</span> * <span class="variable language_">this</span>.<span class="property">pageSize</span></span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="number">8.</span>查找和重置都是在数据有的方法直接用，放上两个点击事件</span><br><span class="line"> <span class="comment">//查询</span></span><br><span class="line">    <span class="title function_">find</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getData</span>(<span class="variable language_">this</span>.<span class="property">formInline</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//重置</span></span><br><span class="line">    <span class="title function_">reset</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getData</span>(<span class="variable language_">this</span>.<span class="property">formInline</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">formInline</span> = &#123;&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="number">9.</span>点击删除，添加点击事件，发送请求将点击的id闯过去</span><br><span class="line">  <span class="title function_">del</span>(<span class="params">row</span>)&#123;<span class="comment">//row当前变格的对象</span></span><br><span class="line">      <span class="title function_">studentDel</span>(row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">status</span> === <span class="number">200</span>)&#123;</span><br><span class="line">          <span class="variable language_">this</span>.$message(&#123;<span class="attr">message</span>:<span class="string">&quot;删除数据成功&quot;</span>,<span class="attr">type</span>:<span class="string">&#x27;success&#x27;</span>&#125;);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">getData</span>();<span class="comment">//重新发送请求</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5-信息列表的增删改查"><a href="#5-信息列表的增删改查" class="headerlink" title="5.信息列表的增删改查"></a>5.信息列表的增删改查</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>先搭配页面的静态页面，包括弹窗等。</span><br><span class="line"> &lt;div <span class="keyword">class</span>=<span class="string">&quot;infoList&quot;</span>&gt;</span><br><span class="line">     <span class="comment">//新增按钮的表头</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:inline</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;demo-form-inline&quot;</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addStudent&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    &lt;!--表单内容--&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">border</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">label</span>=<span class="string">&quot;性别&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;age&quot;</span> <span class="attr">label</span>=<span class="string">&quot;年龄&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">prop</span>=<span class="string">&quot;father&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;父亲&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">prop</span>=<span class="string">&quot;mather&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;母亲&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;家庭住址&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;入校时间&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;联系方式&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">template</span>  <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">icon</span>=<span class="string">&quot;el-icon-edit&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            @<span class="attr">click</span>=<span class="string">&quot;edit(scope.row)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">icon</span>=<span class="string">&quot;el-icon-delete&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            @<span class="attr">click</span>=<span class="string">&quot;del(scope.row)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    &lt;!--弹框--&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-dialog</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&quot;添加学生信息&quot;</span>//<span class="attr">标题</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogFormVisible&quot;</span>//<span class="attr">控制显示和隐藏</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span>//<span class="attr">表单的总大小</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;form&quot;</span>&gt;</span>//对表单进行验证规则rules</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">:label-width</span>=<span class="string">&quot;formLabelWidth&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span>//formLabelWidth 表单的大小</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span> //绑定输入框的内容</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;性别&quot;</span> <span class="attr">:label-width</span>=<span class="string">&quot;formLabelWidth&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;sex&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">v-model</span>=<span class="string">&quot;form.sex&quot;</span> <span class="attr">label</span>=<span class="string">&quot;1&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">v-model</span>=<span class="string">&quot;form.sex&quot;</span> <span class="attr">label</span>=<span class="string">&quot;2&quot;</span>&gt;</span>女<span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;年龄&quot;</span> <span class="attr">:label-width</span>=<span class="string">&quot;formLabelWidth&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;age&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.age&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;父亲姓名&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:label-width</span>=<span class="string">&quot;formLabelWidth&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">prop</span>=<span class="string">&quot;father&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.father&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;母亲名字&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:label-width</span>=<span class="string">&quot;formLabelWidth&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">prop</span>=<span class="string">&quot;mather&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.mather&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;家庭住址&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:label-width</span>=<span class="string">&quot;formLabelWidth&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.address&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;入校时间&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:label-width</span>=<span class="string">&quot;formLabelWidth&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-date-picker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">v-model</span>=<span class="string">&quot;form.time&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">format</span>=<span class="string">&quot;yyyy 年 MM 月 dd 日&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;date&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">placeholder</span>=<span class="string">&quot;选择日期&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form-item</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;联系方式&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:label-width</span>=<span class="string">&quot;formLabelWidth&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.phone&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;closeInfo(&#x27;form&#x27;)&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;sure(form)&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>将收集的表单数据进行定义在data中，并且写上表单规则</span><br><span class="line"> <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">tableData</span>: [],</span><br><span class="line">      <span class="attr">dialogFormVisible</span>: <span class="literal">false</span>,  <span class="comment">//弹窗默认为false</span></span><br><span class="line">      <span class="attr">form</span>: &#123;  <span class="comment">//收集的内容信息</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">sex</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">father</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">mather</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">address</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">time</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">phone</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">formLabelWidth</span>: <span class="string">&quot;80px&quot;</span>,<span class="comment">//设置表单的大小</span></span><br><span class="line">      <span class="attr">rules</span>: &#123;  <span class="comment">//表单验证的规则</span></span><br><span class="line">        <span class="attr">name</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;请输入姓名&quot;</span> &#125;],</span><br><span class="line">        <span class="attr">sex</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">        <span class="attr">age</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;请输入年龄&quot;</span> &#125;],</span><br><span class="line">        <span class="attr">address</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;请输入地址&quot;</span> &#125;],</span><br><span class="line">        <span class="attr">time</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;请输入入学时间&quot;</span> &#125;],</span><br><span class="line">        <span class="attr">phone</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;请输入联系方式&quot;</span> &#125;],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">state</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">     </span><br><span class="line"><span class="number">3.</span>在methords中写上各种事件方法</span><br><span class="line"> <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">edit</span>(<span class="params"></span>)&#123;&#125;,</span><br><span class="line">    <span class="title function_">del</span>(<span class="params"></span>)&#123;&#125;,</span><br><span class="line">    <span class="title function_">addStudent</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">closeInfo</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//新增里面确定按钮</span></span><br><span class="line">    <span class="title function_">sure</span>(<span class="params">form</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>[form].<span class="title function_">validate</span>(<span class="function"><span class="params">valid</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(form,<span class="variable language_">this</span>.<span class="property">form</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line"><span class="number">4.</span>在api中写请求方法，因为后端数据原因需要用到qs将数据进行转换一下，先安装qs npm i qs -D,现实工作中是不需要进行转换的</span><br><span class="line"><span class="comment">//信息列表的新增接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">info</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  data = qs.<span class="title function_">stringify</span>(data);</span><br><span class="line"> <span class="keyword">return</span> <span class="title function_">service</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/info&quot;</span>,</span><br><span class="line">    data,</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br><span class="line">     </span><br><span class="line"><span class="number">5.</span>请求写好在列表页进行引用调用，并且在确定按钮中进行严重并且发送请求，请求成功弹窗关闭</span><br><span class="line"><span class="keyword">import</span> &#123;  info &#125; <span class="keyword">from</span> <span class="string">&quot;@/api/api&quot;</span>;</span><br><span class="line"><span class="title function_">sure</span>(<span class="params">form</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>[form].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;<span class="comment">//进行验证</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(form, <span class="variable language_">this</span>.<span class="property">form</span>);</span><br><span class="line">        <span class="keyword">if</span> (valid) &#123;<span class="comment">//验证通过</span></span><br><span class="line">          <span class="title function_">info</span>(<span class="variable language_">this</span>.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;<span class="comment">//发送请求</span></span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">status</span> === <span class="number">200</span>) &#123;<span class="comment">//请求成功</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;<span class="comment">//弹窗关闭</span></span><br><span class="line">              <span class="variable language_">this</span>.$message(&#123; <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">message</span>: res.<span class="property">data</span>.<span class="property">message</span> &#125;);<span class="comment">//并且给到相应的提示</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="number">6.</span>当请求成功后对应的渲染到内容上，同样在api中写上弹窗请求，因为请求弹窗的数据在很多地方使用所以将他进行封装，方便新增和修改时候能够直接去调用这个请求</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">service</span>(&#123; </span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/info&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">     </span><br><span class="line"><span class="comment">//发送请求拿到输入表单的数据进行渲染，并且方便新增和修改时进行调用</span></span><br><span class="line">    <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">getInfo</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">data</span>;<span class="comment">//将数据保存到tableData并且二渲染</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>在确定事件中去调用这个请求接口，并且在create中去获取到数据</span><br><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getData</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line"> <span class="comment">//新增里面确定按钮(在没有封装新增和修改的api前可以这样写一样渲染到页面)</span></span><br><span class="line">    <span class="title function_">sure</span>(<span class="params">form</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>[form].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(form, <span class="variable language_">this</span>.<span class="property">form</span>);</span><br><span class="line">        <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">          <span class="title function_">info</span>(<span class="variable language_">this</span>.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">getData</span>();<span class="comment">//当点击这个确定按钮调用请求</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">              <span class="variable language_">this</span>.$message(&#123; <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">message</span>: res.<span class="property">data</span>.<span class="property">message</span> &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="number">8.</span>对弹窗的一个复用，增加和修改共用一个表单(修改的实现)，先在修改事件中点击修改弹窗为<span class="literal">true</span>，并且将当前表单的选项放到修改中，并且对弹窗的标题进行三元展示，用state去控制显示标题，当点新增时候会将修改的内容复制过来，这个时候可以将默认的表单进行清空，为防止修改的时候内容与页面同步此时使用深拷贝修改表单的对象，采用展开运算符，就不要将当前的对象直接赋值给表单</span><br><span class="line"><span class="comment">//点击修改</span></span><br><span class="line"><span class="title function_">edit</span>(<span class="params">row</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(row);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">state</span> = <span class="literal">false</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">form</span> = &#123; ...row &#125;; <span class="comment">//在点击修改的时候不要直接把赋值，而是要扩展一下将当前的对象进行展开</span></span><br><span class="line">      <span class="comment">//this.form = row//将表单的每一行的信息放到修改中，这样写会导致修改时候与页面进行同步的bug采用深拷贝</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-dialog</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:title</span>=<span class="string">&quot;state ? &#x27;添加学生信息&#x27; : &#x27;修改学生信息&#x27;&quot;</span>//<span class="attr">当state为ture时为添加反之为需改</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogFormVisible&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml"> state: true,//默认的添加还是修改的标题</span></span><br><span class="line"><span class="language-xml">   </span></span><br><span class="line"><span class="language-xml">//点击添加</span></span><br><span class="line"><span class="language-xml">addStudent() &#123;</span></span><br><span class="line"><span class="language-xml">      this.state = true</span></span><br><span class="line"><span class="language-xml">      this.dialogFormVisible = true;</span></span><br><span class="line"><span class="language-xml">    &#125;,</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        </span></span><br><span class="line"><span class="language-xml">9.解决当点击修改时候的取消时候要将表单验证规则清空，并且将弹窗关闭</span></span><br><span class="line"><span class="language-xml">//点击取消的时候</span></span><br><span class="line"><span class="language-xml"> closeInfo(form)&#123;</span></span><br><span class="line"><span class="language-xml">      console.log(form);</span></span><br><span class="line"><span class="language-xml">      this.dialogFormVisible = false;</span></span><br><span class="line"><span class="language-xml">      this.$refs[form].resetFields();//点击取消时候要将表单验证的规则进行清空</span></span><br><span class="line"><span class="language-xml">    &#125;,</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        </span></span><br><span class="line"><span class="language-xml">10.点击删除功能清除当前的表单，在api中发送请求将id传进去，并且在删除事件中点击删除后要用户确定是否删除并且重新渲染</span></span><br><span class="line"><span class="language-xml">//信息列表的删除接口</span></span><br><span class="line"><span class="language-xml">export function infoDel(id) &#123;</span></span><br><span class="line"><span class="language-xml">  return service(&#123;</span></span><br><span class="line"><span class="language-xml">    method: &quot;delete&quot;,</span></span><br><span class="line"><span class="language-xml">    url: `/info/$&#123;id&#125;`,</span></span><br><span class="line"><span class="language-xml">  &#125;);</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml">     </span></span><br><span class="line"><span class="language-xml"> //点击删除之后</span></span><br><span class="line"><span class="language-xml"> del(row) &#123;</span></span><br><span class="line"><span class="language-xml">      console.log(row);</span></span><br><span class="line"><span class="language-xml">      this.$alert(&quot;你确定要删除吗？&quot;, &quot;提示&quot;, &#123;</span></span><br><span class="line"><span class="language-xml">        confirmButtonText: &quot;确定&quot;,</span></span><br><span class="line"><span class="language-xml">        callback: () =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          infoDel(row.id).then((res) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">            if (res.data.status === 200) &#123;</span></span><br><span class="line"><span class="language-xml">              this.getData();//重新请求</span></span><br><span class="line"><span class="language-xml">              this.$message(&#123; message: res.data.message, type: &quot;success&quot; &#125;);</span></span><br><span class="line"><span class="language-xml">            &#125;</span></span><br><span class="line"><span class="language-xml">          &#125;);</span></span><br><span class="line"><span class="language-xml">        &#125;,</span></span><br><span class="line"><span class="language-xml">      &#125;);</span></span><br><span class="line"><span class="language-xml">    &#125;,</span></span><br><span class="line"><span class="language-xml">        </span></span><br><span class="line"><span class="language-xml">        </span></span><br><span class="line"><span class="language-xml">11.对新增和修改的方法进行封装，在api中将两者的请求方法合在一起</span></span><br><span class="line"><span class="language-xml">//信息列表的新增和修改接口</span></span><br><span class="line"><span class="language-xml">export function info(type, data) &#123;</span></span><br><span class="line"><span class="language-xml">  data = qs.stringify(data);</span></span><br><span class="line"><span class="language-xml">  let obj = &#123; method: type, url: &quot;/info&quot;, data &#125;;</span></span><br><span class="line"><span class="language-xml">  return service(obj);</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml">     </span></span><br><span class="line"><span class="language-xml">12.将新增和修改的引入都改为info，并且将新增和修改的请求中加上post还是put的标识</span></span><br><span class="line"><span class="language-xml">import &#123; info, getInfo, infoDel &#125; from &quot;@/api/api&quot;;</span></span><br><span class="line"><span class="language-xml">     </span></span><br><span class="line"><span class="language-xml">sure(form) &#123;</span></span><br><span class="line"><span class="language-xml">      this.$refs.form.validate((valid) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        if (valid) &#123;</span></span><br><span class="line"><span class="language-xml">          console.log(form, this.form);</span></span><br><span class="line"><span class="language-xml">          if (this.state) &#123;</span></span><br><span class="line"><span class="language-xml">            info(&quot;post&quot;,this.form).then((res) =&gt; &#123;//当点击新增时候</span></span><br><span class="line"><span class="language-xml">              if (res.data.status === 200) &#123;</span></span><br><span class="line"><span class="language-xml">                console.log(form);</span></span><br><span class="line"><span class="language-xml">                this.getData();</span></span><br><span class="line"><span class="language-xml">                this.dialogFormVisible = false;</span></span><br><span class="line"><span class="language-xml">                this.$message(&#123; type: &quot;success&quot;, message: res.data.message &#125;);</span></span><br><span class="line"><span class="language-xml">              &#125;</span></span><br><span class="line"><span class="language-xml">            &#125;);</span></span><br><span class="line"><span class="language-xml">          &#125;else&#123;</span></span><br><span class="line"><span class="language-xml">            info(&#x27;put&#x27;,this.form).then((res) =&gt; &#123;//当点击修改时候发送请求</span></span><br><span class="line"><span class="language-xml">              if (res.data.status === 200) &#123;</span></span><br><span class="line"><span class="language-xml">                this.getData();</span></span><br><span class="line"><span class="language-xml">                this.dialogFormVisible = false;</span></span><br><span class="line"><span class="language-xml">                this.$message(&#123; type: &quot;success&quot;, message: res.data.message &#125;);</span></span><br><span class="line"><span class="language-xml">              &#125;</span></span><br><span class="line"><span class="language-xml">            &#125;);</span></span><br><span class="line"><span class="language-xml">          &#125;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      &#125;);</span></span><br><span class="line"><span class="language-xml">    &#125;,</span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>
<h2 id="6-对增删改查进行封装减少重复的代码"><a href="#6-对增删改查进行封装减少重复的代码" class="headerlink" title="6.对增删改查进行封装减少重复的代码"></a>6.对增删改查进行封装减少重复的代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>创建一个table的文件用来封装方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>封装表格数据的方法</span><br><span class="line"><span class="comment">//获取表格的数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params">root, url, params</span>) &#123;<span class="comment">//root表示当前那个页面所对应的this指向，url:请求接口，params：传的参数如没有则为空对象</span></span><br><span class="line">  root.<span class="property">service</span></span><br><span class="line">    .<span class="title function_">get</span>(url, &#123; <span class="attr">params</span>: params || &#123;&#125; &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        root.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">        root.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>在页面进行引入getData，并且将请求的方法改为当前的<span class="variable language_">this</span>和接口</span><br><span class="line"><span class="keyword">import</span> &#123; getData &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/table&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">getData</span>(<span class="variable language_">this</span>,<span class="string">&quot;/info&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line"><span class="number">4.</span>封装新增和修改的方法</span><br><span class="line"><span class="comment">//新增和修改方法的封装</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&quot;qs&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params">root, method, url, form, callback</span>) &#123;<span class="comment">//url：地址 form：传的表单  callback：回调</span></span><br><span class="line">  <span class="keyword">let</span> data = qs.<span class="title function_">stringify</span>(form);</span><br><span class="line">  root.<span class="property">service</span>[method](url, data)<span class="comment">//这个methords是看发送请求是post还是Put</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(form);</span><br><span class="line">        <span class="title function_">callback</span>(root, url);<span class="comment">//将this和地址进行传入回调</span></span><br><span class="line">        root.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">        root.<span class="property">$refs</span>[<span class="string">&quot;form&quot;</span>].<span class="title function_">resetFields</span>();</span><br><span class="line">        root.$message(&#123; <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">message</span>: res.<span class="property">data</span>.<span class="property">message</span> &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>将changeInfo进行引入,并且在新增和修改的事件中使用</span><br><span class="line"><span class="keyword">import</span> &#123; getData ,changeInfo&#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/table&quot;</span>;</span><br><span class="line"></span><br><span class="line"> <span class="title function_">sure</span>(<span class="params">form</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">form</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(form, <span class="variable language_">this</span>.<span class="property">form</span>);</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>) &#123;</span><br><span class="line">            <span class="comment">//没有封装之前的写法</span></span><br><span class="line">            <span class="comment">// info(&quot;post&quot;,this.form).then((res) =&gt; &#123;//当点击新增时候</span></span><br><span class="line">            <span class="comment">//   if (res.data.status === 200) &#123;</span></span><br><span class="line">            <span class="comment">//     console.log(form);</span></span><br><span class="line">            <span class="comment">//     this.getData();</span></span><br><span class="line">            <span class="comment">//     this.dialogFormVisible = false;</span></span><br><span class="line">            <span class="comment">//     this.$message(&#123; type: &quot;success&quot;, message: res.data.message &#125;);</span></span><br><span class="line">            <span class="comment">//   &#125;</span></span><br><span class="line">            <span class="comment">//&#125;);</span></span><br><span class="line">            <span class="comment">//封装之后直接用changeInfo去调用将四个参数传过去</span></span><br><span class="line">            <span class="title function_">changeInfo</span>(<span class="variable language_">this</span>, <span class="string">&quot;post&quot;</span>, <span class="string">&quot;/info&quot;</span>, <span class="variable language_">this</span>.<span class="property">form</span>, getData);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">changeInfo</span>(<span class="variable language_">this</span>, <span class="string">&quot;put&quot;</span>, <span class="string">&quot;/info&quot;</span>, <span class="variable language_">this</span>.<span class="property">form</span>, getData);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="number">6.</span>将新增和修改方法继续封装精简一下合二为一，定义一个methords，然后三元判断当前是新增还是修改，然后将methords当参数传过去进行调用方法</span><br><span class="line">  <span class="title function_">sure</span>(<span class="params">form</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">form</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(form, <span class="variable language_">this</span>.<span class="property">form</span>);</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>) &#123;</span><br><span class="line">            <span class="comment">// info(&quot;post&quot;,this.form).then((res) =&gt; &#123;//当点击新增时候</span></span><br><span class="line">            <span class="comment">//   if (res.data.status === 200) &#123;</span></span><br><span class="line">            <span class="comment">//     console.log(form);</span></span><br><span class="line">            <span class="comment">//     this.getData();</span></span><br><span class="line">            <span class="comment">//     this.dialogFormVisible = false;</span></span><br><span class="line">            <span class="comment">//     this.$message(&#123; type: &quot;success&quot;, message: res.data.message &#125;);</span></span><br><span class="line">            <span class="comment">//   &#125;</span></span><br><span class="line">            <span class="comment">//&#125;);</span></span><br><span class="line">            <span class="keyword">let</span> methods = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">state</span> ? (methods = <span class="string">&quot;post&quot;</span>) : (methods = <span class="string">&quot;put&quot;</span>);</span><br><span class="line">            <span class="title function_">changeInfo</span>(<span class="variable language_">this</span>, methods, <span class="string">&quot;/info&quot;</span>, <span class="variable language_">this</span>.<span class="property">form</span>, getData);</span><br><span class="line">          &#125; </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="number">7.</span>对删除方法的封装</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">delData</span>(<span class="params">root, url, id, callback</span>) &#123;<span class="comment">//当前的this，地址，删除的id </span></span><br><span class="line">  root.$alert(<span class="string">&quot;你确定要删除吗？&quot;</span>, <span class="string">&quot;提示&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">confirmButtonText</span>: <span class="string">&quot;确定&quot;</span>,</span><br><span class="line">    <span class="attr">callback</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">service</span></span><br><span class="line">        .<span class="title function_">delete</span>(<span class="string">`<span class="subst">$&#123;url&#125;</span>/<span class="subst">$&#123;id&#125;</span>`</span>)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="title function_">callback</span>(root, url);</span><br><span class="line">            root.$message(&#123; <span class="attr">message</span>: res.<span class="property">data</span>.<span class="property">message</span>, <span class="attr">type</span>: <span class="string">&quot;success&quot;</span> &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="移动端的搜索功能"><a href="#移动端的搜索功能" class="headerlink" title="移动端的搜索功能"></a>移动端的搜索功能</h1><h2 id="1-书写静态页面，历史记录"><a href="#1-书写静态页面，历史记录" class="headerlink" title="1.书写静态页面，历史记录"></a>1.书写静态页面，历史记录</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>在输入框上绑定v-modul 以及事件，在历史记录上进行遍历，在data中将输入的数据和遍历的数据保存写按下事件</span><br><span class="line"> &lt;input</span><br><span class="line">      type=<span class="string">&quot;text&quot;</span></span><br><span class="line">      placeholder=<span class="string">&quot;周杰伦&quot;</span><span class="comment">//默认的名字</span></span><br><span class="line">      v-model=<span class="string">&quot;searchKey&quot;</span><span class="comment">//绑定输入的值</span></span><br><span class="line">      @keydown.<span class="property">enter</span>=<span class="string">&quot;enterKey&quot;</span><span class="comment">//回车事件</span></span><br><span class="line">    /&gt;</span><br><span class="line">          </span><br><span class="line">  </span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">v-for</span>=<span class="string">&quot;item in keyWorldList&quot;</span>//<span class="attr">将输入的值进行遍历渲染</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">class</span>=<span class="string">&quot;spanKey&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      @<span class="attr">click</span>=<span class="string">&quot;searchHistory(item)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;&#123; item &#125;&#125;//渲染</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">keyWorldList</span>: [],<span class="comment">//添加关键字后的数组</span></span><br><span class="line">      <span class="attr">searchKey</span>: <span class="string">&quot;&quot;</span>,<span class="comment">//输入的数据</span></span><br><span class="line">      <span class="attr">searchList</span>: [],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line"><span class="attr">methords</span>:&#123;</span><br><span class="line">    <span class="title function_">enterkey</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyworldList</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">searchkey</span>)<span class="comment">//将输入的数据放到keyworldList中</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>当添加完成后为防止刷新页面消失将数组保存到locastorage中进行永久存储</span><br><span class="line"><span class="attr">methords</span>:&#123;</span><br><span class="line">    <span class="title function_">enterkey</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyworldList</span>.<span class="title function_">unshift</span>(<span class="variable language_">this</span>.<span class="property">searchkey</span>)<span class="comment">//将输入的数据放到keyworldList中</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;keyWorldList&quot;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>当渲染的时候需要在locastorage里面去获取一下列表，在mounted中,要记得转换对象形式</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">keyworldList</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;keyWorldList&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>删除历史记录，在删除上点击事件，当点击的时候要将<span class="variable language_">localStorage</span>里面清空，并且将数组清空</span><br><span class="line"> <span class="title function_">delHistory</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;keyWorldList&quot;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">keyWorldList</span> = [];</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="number">5.</span>当删除之后需要判断数组是否为空，如果有值则为本身，如果没有值则为空数组，防止添加为<span class="literal">null</span></span><br><span class="line"> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">keyWorldList</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;keyWorldList&quot;</span>))</span><br><span class="line">      ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;keyWorldList&quot;</span>))</span><br><span class="line">      : [];</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>为防止多次舒服同一个数据，所以要对数据进行查重</span><br><span class="line"><span class="attr">methords</span>:&#123;</span><br><span class="line">    <span class="title function_">enterkey</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyworldList</span>.<span class="title function_">unshift</span>(<span class="variable language_">this</span>.<span class="property">searchkey</span>)<span class="comment">//将输入的数据放到keyworldList中</span></span><br><span class="line">        <span class="comment">//防止输入的为同样的，将对数组进行去重</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyWorldList</span> = [...<span class="keyword">new</span> <span class="title class_">Set</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>)];</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;keyWorldList&quot;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>为防止用户什么都没输入也会按下回车也会去渲染，所以要加一个判断，当不为空时才能渲染</span><br><span class="line"><span class="attr">methords</span>:&#123;</span><br><span class="line">    <span class="title function_">enterkey</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">searchKey</span> !== <span class="string">&quot;&quot;</span>) &#123;<span class="comment">//防止用户什么都没输入也会按下回车也会去渲染，所以要加一个判断</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyworldList</span>.<span class="title function_">unshift</span>(<span class="variable language_">this</span>.<span class="property">searchkey</span>)<span class="comment">//将输入的数据放到keyworldList中</span></span><br><span class="line">        <span class="comment">//防止输入的为同样的，将对数组进行去重</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyWorldList</span> = [...<span class="keyword">new</span> <span class="title class_">Set</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>)];</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;keyWorldList&quot;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>))</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">8.</span>为防止有多个历史记录将使长度坍塌，则需要判断历史记录得长度使其最大为<span class="number">5</span></span><br><span class="line"><span class="attr">methords</span>:&#123;</span><br><span class="line">    <span class="title function_">enterkey</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">searchKey</span> !== <span class="string">&quot;&quot;</span>) &#123;<span class="comment">//防止用户什么都没输入也会按下回车也会去渲染，所以要加一个判断</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyworldList</span>.<span class="title function_">unshift</span>(<span class="variable language_">this</span>.<span class="property">searchkey</span>)<span class="comment">//将输入的数据放到keyworldList中</span></span><br><span class="line">        <span class="comment">//防止输入的为同样的，将对数组进行去重</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyWorldList</span> = [...<span class="keyword">new</span> <span class="title class_">Set</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>)];</span><br><span class="line">        <span class="comment">//设置历史记录的固定长度防止样式崩塌</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">keyWorldList</span>.<span class="property">length</span> &gt; <span class="number">5</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">keyWorldList</span>.<span class="title function_">splice</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>.<span class="property">length</span> - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;keyWorldList&quot;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>))</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">9.</span>当按下回车根据关键字返回相应得数据，首先要在api中根据接口写请求</span><br><span class="line"><span class="comment">//获取搜索列表的数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getSearchMusic</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">service</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;Get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/search?keywords=<span class="subst">$&#123;data&#125;</span>`</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">10.</span>然后在回车事件中发送请求并将数据放到一个新数组中进行渲染</span><br><span class="line"> <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">keyWorldList</span>: [],<span class="comment">//添加关键字后的数组</span></span><br><span class="line">      <span class="attr">searchKey</span>: <span class="string">&quot;&quot;</span>,<span class="comment">//输入得关键字</span></span><br><span class="line">      <span class="attr">searchList</span>: [],<span class="comment">//用来接收关键字得数据</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="attr">methords</span>:&#123;</span><br><span class="line">    <span class="comment">//点击回车事件</span></span><br><span class="line">    <span class="title function_">enterkey</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">searchKey</span> !== <span class="string">&quot;&quot;</span>) &#123;<span class="comment">//防止用户什么都没输入也会按下回车也会去渲染，所以要加一个判断</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyworldList</span>.<span class="title function_">unshift</span>(<span class="variable language_">this</span>.<span class="property">searchkey</span>)<span class="comment">//将输入的数据放到keyworldList中</span></span><br><span class="line">        <span class="comment">//防止输入的为同样的，将对数组进行去重</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyWorldList</span> = [...<span class="keyword">new</span> <span class="title class_">Set</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>)];</span><br><span class="line">        <span class="comment">//设置历史记录的固定长度防止样式崩塌</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">keyWorldList</span>.<span class="property">length</span> &gt; <span class="number">5</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">keyWorldList</span>.<span class="title function_">splice</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>.<span class="property">length</span> - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;keyWorldList&quot;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">keyWorldList</span>))</span><br><span class="line">        <span class="comment">//点击回车请求数据</span></span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">getSearchMusic</span>(<span class="variable language_">this</span>.<span class="property">searchKey</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">searchList</span> = res.<span class="property">data</span>.<span class="property">result</span>.<span class="property">songs</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">searchKey</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">11.</span>当我们点击历史记录得时候给历史记录添加事件也可也获取歌曲得数据</span><br><span class="line">  <span class="comment">//点击历史记录获取歌曲名单</span></span><br><span class="line">    <span class="attr">searchHistory</span>: <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">getSearchMusic</span>(item);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">searchList</span> = res.<span class="property">data</span>.<span class="property">result</span>.<span class="property">songs</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="number">12.</span>根据数据进行渲染页面</span><br><span class="line"><span class="comment">//根据关键词展示得数据</span></span><br><span class="line"> &lt;div <span class="keyword">class</span>=<span class="string">&quot;itemList&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in searchList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;itemLeft&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;updateIndex(item)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;leftSpan&quot;</span>&gt;</span>&#123;&#123; i + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">&quot;(item1, index) in item.artists&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123; //遍历作者名字</span></span><br><span class="line"><span class="language-xml">            item1.name</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;itemRight&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;icon bofang&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;item.mvid != 0&quot;</span>&gt;</span>//判断当前是否有mv图标</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#icon-shipin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;icon liebiao&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#icon-31liebiao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">13.</span>当我们点击这个列表将会在播放列表进行播放，此时需要在store中将我们点击得歌曲push到播放列表中</span><br><span class="line"> <span class="attr">pushPlayList</span>: <span class="keyword">function</span> (<span class="params">state, value</span>) &#123;</span><br><span class="line">      state.<span class="property">playList</span>.<span class="title function_">push</span>(value);</span><br><span class="line">   &#125;,</span><br><span class="line">       </span><br><span class="line"><span class="number">14.</span>给列表一个点击事件将当前得item传过去</span><br><span class="line"><span class="comment">//点击歌曲的左边播放音乐</span></span><br><span class="line">    <span class="attr">updateIndex</span>: <span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">      item.<span class="property">al</span> = item.<span class="property">album</span>;</span><br><span class="line">      item.<span class="property">al</span>.<span class="property">picUrl</span> = item.<span class="property">album</span>.<span class="property">artist</span>.<span class="property">img1v1Url</span>;<span class="comment">//这两局是底部组件中得图片无法读取得bug，可以将al赋值为当前得数据</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;pushPlayList&quot;</span>, item);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(</span><br><span class="line">        <span class="string">&quot;updatePlayListIndex&quot;</span>,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">playList</span>.<span class="property">length</span> - <span class="number">1</span></span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<h1 id="Axios的实现"><a href="#Axios的实现" class="headerlink" title="Axios的实现"></a>Axios的实现</h1><h2 id="1-怎么去实现的二次封装axios，请求拦截器里面的代码怎么写的"><a href="#1-怎么去实现的二次封装axios，请求拦截器里面的代码怎么写的" class="headerlink" title="1.怎么去实现的二次封装axios，请求拦截器里面的代码怎么写的"></a>1.怎么去实现的二次封装axios，请求拦截器里面的代码怎么写的</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.要使用axios下载引入</span></span><br><span class="line">下载：npm install axios -S</span><br><span class="line">引入：<span class="keyword">import</span> axios form <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.使用</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;url?参数1=值&amp;参数2=值&#x27;</span>);</span><br><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;url&#x27;</span>,&#123;</span><br><span class="line">    参数<span class="number">1</span>：值</span><br><span class="line">    参数<span class="number">2</span>：值</span><br><span class="line">&#125;);</span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;请求的路径&#x27;</span></span><br><span class="line">    <span class="attr">methords</span>:<span class="string">&#x27;请求的方式，默认的是get&#x27;</span></span><br><span class="line">    <span class="attr">params</span>:&#123;&#125;<span class="comment">//get请求方式：前端给后端传递的数据</span></span><br><span class="line">    <span class="attr">data</span>:&#123;&#125;<span class="comment">//post请求方法：前端给后端传递的数据</span></span><br><span class="line">    <span class="attr">header</span>:&#123;&#125;<span class="comment">//自定义请求头</span></span><br><span class="line">    <span class="attr">timeout</span>:<span class="number">1000</span><span class="comment">//如果请求时间超时则请求会中断</span></span><br><span class="line">    <span class="attr">responseType</span>:<span class="string">&#x27;默认的是json格式数据&#x27;</span><span class="comment">//响应的数据类型</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//二.在公司中前端接口会出现的情况</span></span><br><span class="line"><span class="comment">//一切正常不会出现跨域问题</span></span><br><span class="line"><span class="comment">//出现了跨域的问题怎么解决？</span></span><br><span class="line"><span class="comment">//解决：1.前端解决</span></span><br><span class="line"><span class="comment">//在vue中设置代理来解决跨域问题可以通过vue.config.js中配置devserver.proxy配置代理</span></span><br><span class="line">说明：如果前端应用和后端<span class="variable constant_">API</span>服务器没有运行到同一个主机上，需要在<span class="string">&#x27;开发环境&#x27;</span>将<span class="variable constant_">API</span>请求代理到<span class="variable constant_">API</span>服务器</span><br><span class="line"><span class="comment">//具体配置：打开vue.config.js中,配置完重启一下脚手架</span></span><br><span class="line"><span class="attr">devServer</span>:&#123;</span><br><span class="line">    <span class="attr">proxy</span>:<span class="string">&#x27;http://localhost:3000&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//注意：代理在开发环境中生效，生成环境是不生效</span></span><br><span class="line">在公司里，项目上线后如果发现请求的问题，怎么处理？</span><br><span class="line"><span class="comment">//解决代理打包后代理失效的设置：环境变量</span></span><br><span class="line">设置环境变量：在项目的根目录中去创建</span><br><span class="line">开发环境：.<span class="property">env</span>.<span class="property">development</span></span><br><span class="line">生产环境：.<span class="property">enc</span>.<span class="property">production</span> </span><br><span class="line"></span><br><span class="line">开发环境变量名是：<span class="variable constant_">VUE_APP_TITLE</span>，<span class="variable constant_">VUE_APP_BASE_API</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//后端解决</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//三，二次封装axios，在公司中一定要封装的</span></span><br><span class="line"><span class="comment">//在公司中分为开发环境以及生产环境</span></span><br><span class="line"><span class="comment">//封装的意义：为什么要封装</span></span><br><span class="line"><span class="number">1.</span>url统一管理方便日后更换环境</span><br><span class="line"><span class="number">2.</span>post请求需要判断用户是否登录状态，每次都要传递参数，需要在请求头中加上token</span><br><span class="line"><span class="number">3.</span>在公司一般在新建一个<span class="built_in">require</span>.<span class="property">js</span>文件</span><br><span class="line"><span class="comment">//此文件做二次封装axios</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;<span class="comment">//1.引入axios</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">//baseURL: &quot;/api&quot;, //baseURL会自动加在请求地址上，将需要自动加的地址写上去</span></span><br><span class="line">    <span class="comment">//判断当前是生成环境还是开发环境，开发环境就走跨域,生产环境同样能够调用这里的环境变量</span></span><br><span class="line">    <span class="attr">baseURL</span>:process.<span class="property">env</span>.<span class="property">VUE_APP_TITLE</span> = <span class="string">&quot;生产环境&quot;</span>？process.<span class="property">env</span>.<span class="property">development</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">3000</span>, <span class="comment">//超过请求时间会终止</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加请求拦截器，前端给后端的东西，没有到后端</span></span><br><span class="line"><span class="comment">//在发送请求前可以做些什么=&gt;判断登录的状态</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//在请求前获取并设置token，并将token放到请求头上</span></span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&quot;token&quot;</span>] = <span class="title function_">getToken</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加响应拦截器//后端给前端的东西</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; status, message &#125; = response.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">if</span> (status !== <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="title class_">Message</span>(&#123; <span class="attr">message</span>: message || <span class="string">&quot;error&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回axios对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br><span class="line"></span><br><span class="line"><span class="comment">//四.api解耦</span></span><br><span class="line"><span class="comment">//封装的意义：单独维护api的请求，会项目中的所有请求方便管理</span></span><br><span class="line"><span class="comment">//很多页面用同一个页面无须写很多次请求，直接调用封装好的函数</span></span><br><span class="line"><span class="comment">//新建一个api中写上各种的请求方法，然后在组件中进行引用</span></span><br><span class="line">get请求：params。post请求：data  </span><br><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">&quot;../service.js&quot;</span>;</span><br><span class="line"><span class="comment">//学生列表的查询接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">students</span>(<span class="params">params</span>)&#123;<span class="comment">//params是一个形参是一个对象，那个组件需要使用直接调用并且传参</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">service</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/students&quot;</span>,</span><br><span class="line">    params,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">一般在公司中详细去看utils目录或者其他文件中二次封装的axios以及api文件各种请求方法</span><br></pre></td></tr></table></figure>
<h1 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">vuex：状态管理</span><br><span class="line">优点是：方便操作，方便管理，方便传值</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.下载并引入</span></span><br><span class="line">npm i vuex</span><br><span class="line"><span class="comment">//2.创建store.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">   <span class="comment">//进行模块化，一般用于组件很多进行细分</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br><span class="line"></span><br><span class="line"><span class="comment">//2，在main.js中引入store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//在开发过程中一般配合调用api去操作vuex，因为vuex是一个状态管理，多个组件用到的数据，只需要在vuex中进行修改就可以实现多处修改</span></span><br><span class="line"><span class="attr">state</span>:用来存储数据的，一般通过mapState进行映射到组件中</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>; <span class="comment">// 从vuex中导入mapState</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">//...mapState([&#x27;name&#x27;]), // 经过解构后，自动就添加到了计算属性中，此时就可以直接像访问计算属性一样访问它</span></span><br><span class="line">    ...<span class="title function_">mapState</span>(&#123; <span class="attr">aliasName</span>: <span class="string">&#x27;name&#x27;</span> &#125;),  <span class="comment">// 赋别名的话，这里接收对象，而不是数组，在页面展示直接用&#123;&#123;aliasName&#125;&#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">getter</span>:相当于计算属性，当你多个组件需要对数据进行添加或者删除时可以用</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">number</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">list</span>: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;111&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;222&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;333&#x27;</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 在store对象中增加getters属性</span></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">getMessage</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="comment">// 获取修饰后的name，第一个参数state为必要参数，必须写在形参上</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">`hello<span class="subst">$&#123;state.name&#125;</span>`</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//在组件中我们可以通过mapGetter去统一修改</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapState, mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">getMessage</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;name&#x27;</span>]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;getMessage&#x27;</span>]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">mutations</span>:是同步修改数据的地方，集中管理</span><br><span class="line"> <span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">number</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">setNumber</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">number</span> = <span class="number">5</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setNumberIsWhat</span>(<span class="params">state, number</span>) &#123;<span class="comment">//number形参在页面我要传过去的参数进行修改</span></span><br><span class="line">      <span class="comment">// 增加一个带参数的mutations方法</span></span><br><span class="line">      state.<span class="property">number</span> = number;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`旧值：<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;setNumberIsWhat&#x27;</span>, <span class="number">666</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`新值：<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Actions</span>：异步操作的方法</span><br><span class="line"><span class="keyword">async</span> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`旧值：<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;setNum&#x27;</span>, &#123; <span class="attr">number</span>: <span class="number">611</span> &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`新值：<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="title function_">setNum</span>(<span class="params">&#123; commit &#125;</span>) &#123;<span class="comment">//commit是方法的形参听过页面中dispath去映射actions中方法进行异步操作</span></span><br><span class="line">    <span class="comment">// 直接将content结构掉，解构出commit，下面就可以直接调用了</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">commit</span>(<span class="string">&#x27;XXXX&#x27;</span>); <span class="comment">// 直接调用</span></span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="title class_">Module</span>：模块化</span><br></pre></td></tr></table></figure>
<h2 id="实际项目中使用vuex的应用"><a href="#实际项目中使用vuex的应用" class="headerlink" title="实际项目中使用vuex的应用"></a>实际项目中使用vuex的应用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在实际项目中一般调用api接口请求函数为后续异步操作做准备</span></span><br><span class="line"><span class="comment">//搜索的接口</span></span><br><span class="line"><span class="comment">// 请求所需要的参数，都是在调用接口请求函数的时候，传参过来的</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">reqSearchInfo</span> = (<span class="params">searchParams</span>) =&gt; &#123;<span class="comment">//searchParams是需要传过来参数到后端中请求数据</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/list&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>:<span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>:searchParams</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//例如一个搜索的功能(在vuex中)</span></span><br><span class="line"><span class="keyword">import</span> &#123; reqSearchInfo &#125; <span class="keyword">from</span> <span class="string">&quot;@/api&quot;</span><span class="comment">//调用api接口请求函数</span></span><br><span class="line"><span class="comment">//首先在页面当中我们去dispath去调用actions函数请求数据</span></span><br><span class="line"> <span class="title function_">getSearchInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// dispatch本质是在调用对应的actions函数</span></span><br><span class="line">      <span class="comment">// 它可以传参，传递的参数是给了actions函数的第二个形参</span></span><br><span class="line">      <span class="comment">// dispacth只能传递一个参数，如果要传递多个，封装成一个对象去传递</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;getSearchInfo&quot;</span>, <span class="variable language_">this</span>.<span class="property">searchParams</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//在action中去异步请求数据</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getSearchInfo</span>(<span class="params">&#123;commit&#125;,searchParams</span>)&#123;<span class="comment">//getSearchInfo调用的函数名，searchParams传过来的形参</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">reqSearchInfo</span>(searchParams)<span class="comment">//根据接口参数去异步请求数据</span></span><br><span class="line">      <span class="keyword">if</span>(result.<span class="property">code</span> === <span class="number">200</span>)&#123;<span class="comment">//如果请求成功</span></span><br><span class="line">        <span class="title function_">commit</span>(<span class="string">&#x27;RECEIVE_SEARCHINFO&#x27;</span>,result.<span class="property">data</span>)<span class="comment">//通过commit将请求回来的数据传给mutations进行修改</span></span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;获取搜索信息失败&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&#x27;请求获取搜索信息失败&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//提交mutions后，对数据进行修改处理</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="title function_">RECEIVE_SEARCHINFO</span>(<span class="params">state,searchInfo</span>)&#123;<span class="comment">//searchInfo是actions传过来的形参，请求回来的数据</span></span><br><span class="line">    state.<span class="property">searchInfo</span> = searchInfo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//最后将数据保存到state中</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">searchInfo</span>:&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在页面就可以通过mapState拿到数据</span></span><br><span class="line"> <span class="attr">computed</span>: &#123;</span><br><span class="line">    ...<span class="title function_">mapGetters</span>([<span class="string">&quot;goodsList&quot;</span>]),</span><br><span class="line">    ...<span class="title function_">mapState</span>(&#123;</span><br><span class="line">      <span class="attr">searchInfo</span>:<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">search</span>.<span class="property">searchInfo</span></span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line"><span class="comment">//实际用如果有需要修改的数据要单独拿出来可以通过getters</span></span><br><span class="line"> <span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="title function_">attrsList</span>(<span class="params">state</span>)&#123;</span><br><span class="line">    <span class="comment">// 启动项目（或者刷新，刷新页面相当于重新启动项目） state是要重新初始化的</span></span><br><span class="line">    <span class="comment">// state默认是不会做持久化存储的</span></span><br><span class="line">    <span class="comment">// state重新初始化完成，getters是要去拿state的数据计算新的数据的，不会</span></span><br><span class="line">    <span class="comment">// 等待请求完成返回结果再走，getters计算新数据的时候，拿到的state当中的</span></span><br><span class="line">    <span class="comment">// 数据是初始化的空对象数据，getters计算attrsList的时候，就会拿到undefined</span></span><br><span class="line">    <span class="comment">// 如果不写|| []，那么这个undefined就会被组件当中的computed获取到组件当中</span></span><br><span class="line">    <span class="comment">// 组件里面就会在模板当中使用undefined，一旦使用undefined加点或者加（）就报错</span></span><br><span class="line">    <span class="comment">// 报类型错误</span></span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">searchInfo</span>.<span class="property">attrsList</span> || []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">goodsList</span>(<span class="params">state</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">searchInfo</span>.<span class="property">goodsList</span> || []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">trademarkList</span>(<span class="params">state</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">searchInfo</span>.<span class="property">trademarkList</span> || []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//拿到当前的提取整理的数据</span></span><br></pre></td></tr></table></figure>
<h1 id="vue的组件传值"><a href="#vue的组件传值" class="headerlink" title="vue的组件传值"></a>vue的组件传值</h1><h2 id="父子之间通信"><a href="#父子之间通信" class="headerlink" title="父子之间通信"></a>父子之间通信</h2><h3 id="props"><a href="#props" class="headerlink" title="props:"></a>props:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组件中：</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">child</span> <span class="attr">:msg</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子组件中：</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 写法一 用数组接收</span></span><br><span class="line">  <span class="attr">props</span>:[<span class="string">&#x27;msg&#x27;</span>],</span><br><span class="line">  <span class="comment">// 写法二 用对象接收，可以限定接收的数据类型、设置默认值、验证等</span></span><br><span class="line">  <span class="attr">props</span>:&#123;</span><br><span class="line">      <span class="attr">msg</span>:&#123;</span><br><span class="line">          <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">          <span class="attr">default</span>:<span class="string">&#x27;这是默认数据&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">msg</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="sync"><a href="#sync" class="headerlink" title=".sync:"></a>.sync:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">sync</span>：可以帮我们实现父组件向子组件传递的数据的双向绑定，所以子组件接收到数据后可以直接修改，并且会同时修改父组件的数据</span><br><span class="line">父组件中：</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">child</span> <span class="attr">:page.sync</span>=<span class="string">&quot;page&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">page</span>:<span class="number">1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">Child</span>.<span class="property">vue</span>:</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">props</span>:[<span class="string">&quot;page&quot;</span>],<span class="comment">//拿到父组件传过来的数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">computed</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 当我们在子组件里修改 currentPage 时，父组件的 page 也会随之改变</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        currentPage &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">page</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">set</span>(<span class="params">newVal</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.$emit(<span class="string">&quot;update:page&quot;</span>, newVal)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="v-modul："><a href="#v-modul：" class="headerlink" title="v-modul："></a>v-modul：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">v-<span class="attr">modul</span>:和 .<span class="property">sync</span> 类似，可以实现将父组件传给子组件的数据为双向绑定，子组件通过 $emit 修改父组件的数据</span><br><span class="line"><span class="title class_">Parent</span>.<span class="property">vue</span>:</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">v-model</span>=<span class="string">&quot;value&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">value</span>:<span class="number">1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">Child</span>.<span class="property">vue</span>:</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;value&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;handlerChange&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">export default &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    props:[&quot;value&quot;],</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    // 可以修改事件名，默认为 input</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    model:&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">        event:&quot;updateValue&quot;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    methods:&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">        handlerChange(e)&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">            this.$emit(&quot;input&quot;, e.target.value)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">            // 如果有上面的重命名就是这样</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">            this.$emit(&quot;updateValue&quot;, e.target.value)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="children-parent"><a href="#children-parent" class="headerlink" title="$children/$parent"></a>$children/$parent</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$children：获取到一个包含所有子组件(不包含孙子组件)的 <span class="title class_">VueComponent</span> 对象数组，可以直接拿到子组件中所有数据和方法等</span><br><span class="line"></span><br><span class="line">$parent：获取到一个父节点的 <span class="title class_">VueComponent</span> 对象，同样包含父节点中所有数据和方法等</span><br><span class="line"></span><br><span class="line"><span class="title class_">Parent</span>.<span class="property">vue</span>:</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$children</span>[<span class="number">0</span>].<span class="title function_">someMethod</span>() <span class="comment">// 调用第一个子组件的方法</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$children</span>[<span class="number">0</span>].<span class="property">name</span> <span class="comment">// 获取第一个子组件中的属性</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Child</span>.<span class="property">vue</span>:</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$parent</span>.<span class="title function_">someMethod</span>() <span class="comment">// 调用父组件的方法</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$parent</span>.<span class="property">name</span> <span class="comment">// 获取父组件中的属性</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="子向父传值"><a href="#子向父传值" class="headerlink" title="子向父传值"></a>子向父传值</h2><h3 id="ref"><a href="#ref" class="headerlink" title="ref:"></a>ref:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">ref 如果在普通的<span class="variable constant_">DOM</span>元素上，引用指向的就是该<span class="variable constant_">DOM</span>元素;</span><br><span class="line"></span><br><span class="line">如果在子组件上，引用的指向就是子组件实例;</span><br><span class="line"></span><br><span class="line">父组件可以通过 ref 主动获取子组件的属性或者调用子组件的方法</span><br><span class="line"></span><br><span class="line"><span class="comment">// Child.vue</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&quot;oldCode&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">someMethod</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Parent.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">child</span> <span class="attr">ref</span>=<span class="string">&quot;child&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> child = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">child</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(child.<span class="property">name</span>) </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        child.<span class="title function_">someMethod</span>(<span class="string">&quot;调用了子组件的方法&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="emit-v-on"><a href="#emit-v-on" class="headerlink" title="$emit/v-on"></a>$emit/v-on</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">子组件通过派发事件的方式给父组件数据，或者触发父组件更新等操作</span><br><span class="line"><span class="comment">// Child.vue 派发</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">msg</span>: <span class="string">&quot;这是发给父组件的信息&quot;</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">handleClick</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="variable language_">this</span>.$emit(<span class="string">&quot;sendMsg&quot;</span>,<span class="variable language_">this</span>.<span class="property">msg</span>)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Parent.vue 响应</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">child</span> <span class="attr">v-on:sendMsg</span>=<span class="string">&quot;getChildMsg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line">    <span class="comment">// 或 简写</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">child</span> @<span class="attr">sendMsg</span>=<span class="string">&quot;getChildMsg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">getChildMsg</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(msg) <span class="comment">// 这是父组件接收到的消息</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="爷孙之间通信"><a href="#爷孙之间通信" class="headerlink" title="爷孙之间通信"></a>爷孙之间通信</h2><h3 id="attrs-listeners"><a href="#attrs-listeners" class="headerlink" title="$attrs/$listeners"></a>$attrs/$listeners</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$attrs：包含父作用域里除 <span class="keyword">class</span> 和 style 除外的非 props 属性集合。通过 <span class="variable language_">this</span>.<span class="property">$attrs</span> 获取父作用域中所有符合条件的属性集合，然后还要继续传给子组件内部的其他组件，就可以通过 v-bind=<span class="string">&quot;$attrs&quot;</span></span><br><span class="line"></span><br><span class="line">$listeners：包含父作用域里 .<span class="property">native</span> 除外的监听事件集合。如果还要继续传给子组件内部的其他组件，就可以通过 v-on=<span class="string">&quot;$linteners&quot;</span>使用方式是相同的</span><br><span class="line"></span><br><span class="line"><span class="title class_">Parent</span>.<span class="property">vue</span>:</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">:name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">title</span>=<span class="string">&quot;1111&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;/template</span></span><br><span class="line"><span class="language-xml">export default&#123;</span></span><br><span class="line"><span class="language-xml">    data()&#123;</span></span><br><span class="line"><span class="language-xml">        return &#123;</span></span><br><span class="line"><span class="language-xml">            name:&quot;oldCode&quot;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">Child.vue:</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    // 继续传给孙子组件</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">sun-child</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">sun-child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">export default&#123;</span></span><br><span class="line"><span class="language-xml">    props:[&quot;name&quot;], // 这里可以接收，也可以不接收</span></span><br><span class="line"><span class="language-xml">    mounted()&#123;</span></span><br><span class="line"><span class="language-xml">        // 如果props接收了name 就是 &#123; title:1111 &#125;，否则就是&#123; name:&quot;oldCode&quot;, title:1111 &#125;</span></span><br><span class="line"><span class="language-xml">        console.log(this.$attrs)</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>
<h3 id="provide-inject"><a href="#provide-inject" class="headerlink" title="provide/inject"></a>provide/inject</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">provide / inject 是依赖注入，在一些插件或组件库里被常用</span><br><span class="line"></span><br><span class="line">provide：可以让我们指定想要提供给后代组件的数据或方法</span><br><span class="line"></span><br><span class="line">inject：在任何后代组件中接收想要添加在这个组件上的数据或方法，不管组件嵌套多深都可以直接拿来用</span><br><span class="line"></span><br><span class="line">要注意的是 provide 和 inject 传递的数据不是响应式的，也就是说用 inject 接收来数据后，provide 里的数据改变了，后代组件中的数据不会改变，除非传入的就是一个可监听的对象 所以建议还是传递一些常量或者方法</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="comment">// 方法一 不能获取 methods 中的方法</span></span><br><span class="line">    <span class="attr">provide</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&quot;oldCode&quot;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="variable language_">this</span>.<span class="property">data</span>中的属性</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 方法二 不能获取 data 中的属性</span></span><br><span class="line">    <span class="title function_">provide</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&quot;oldCode&quot;</span>,</span><br><span class="line">            <span class="attr">someMethod</span>:<span class="variable language_">this</span>.<span class="property">someMethod</span> <span class="comment">// methods 中的方法</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">someMethod</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是注入的方法&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 后代组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="attr">inject</span>:[<span class="string">&quot;name&quot;</span>,<span class="string">&quot;someMethod&quot;</span>],</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">someMethod</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="兄弟之间传值，任意组件之间都可以传值"><a href="#兄弟之间传值，任意组件之间都可以传值" class="headerlink" title="兄弟之间传值，任意组件之间都可以传值"></a>兄弟之间传值，任意组件之间都可以传值</h2><h3 id="EventBus"><a href="#EventBus" class="headerlink" title="EventBus"></a>EventBus</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">EventBus</span> 是中央事件总线，不管是父子组件，兄弟组件，跨层级组件等都可以使用它完成通信操作</span><br><span class="line"></span><br><span class="line">定义方式有三种：</span><br><span class="line"><span class="comment">// 方法一</span></span><br><span class="line"><span class="comment">// 抽离成一个单独的 js 文件 Bus.js ，然后在需要的地方引入</span></span><br><span class="line"><span class="comment">// Bus.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vue</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法二 直接挂载到全局，一般在项目中这样做的比较多</span></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="keyword">new</span> <span class="title class_">Vue</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法三 注入到 Vue 根对象上</span></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="title class_">Bus</span>: <span class="keyword">new</span> <span class="title class_">Vue</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在需要向外部发送自定义事件的组件内</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;handlerClick&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">changeIndex</span>(<span class="params">index</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$bus</span>.$emit(<span class="string">&quot;changeIndex&quot;</span>, index);<span class="comment">//向外传递数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line"><span class="comment">//组件接受的数据</span></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;changeIndex&#x27;</span>,<span class="variable language_">this</span>.<span class="property">changeIndex</span>)<span class="comment">//用来接收的数据</span></span><br><span class="line"> &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="Vuex-状态管理"><a href="#Vuex-状态管理" class="headerlink" title="Vuex:状态管理"></a>Vuex:状态管理</h3><h3 id="sort插槽："><a href="#sort插槽：" class="headerlink" title="sort插槽："></a>sort插槽：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">就是把子组件的数据通过插槽的方式传给父组件使用，然后再插回来</span><br><span class="line"> <span class="title class_">Child</span>.<span class="property">vue</span>:</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    //在子组件中动态绑定自动传出去的数据</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:user</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">user</span>:&#123; <span class="attr">name</span>:<span class="string">&quot;oldCode&quot;</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="title class_">Parent</span>.<span class="property">vue</span>:</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    //在父组件中通过v-slot定义一个变量来接受子组件传过来的数据，就可以通过变量去拿到数据</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">v-slot</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;&#123; slotProps.user.name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h1 id="封装分页功能"><a href="#封装分页功能" class="headerlink" title="封装分页功能"></a>封装分页功能</h1><h2 id="通过ui框架进行封装"><a href="#通过ui框架进行封装" class="headerlink" title="通过ui框架进行封装"></a>通过ui框架进行封装</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.先把ui框架的分页结构代码复制过来</span></span><br><span class="line">&lt;el-pagination </span><br><span class="line">@size-change=<span class="string">&quot;handleSizeChange&quot;</span>       <span class="comment">// 绑定回调：改变页面展示的数据量大小</span></span><br><span class="line">@current-change=<span class="string">&quot;handleCurrentChange&quot;</span>  <span class="comment">// 绑定回调： 改变页码</span></span><br><span class="line">:current-page=<span class="string">&quot;currentPage4&quot;</span>         <span class="comment">// 当前页码（样式高亮）</span></span><br><span class="line">:page-sizes=<span class="string">&quot;[100, 200, 300, 400]&quot;</span>   <span class="comment">// 可选择的数量大小</span></span><br><span class="line">:page-size=<span class="string">&quot;100&quot;</span>                  <span class="comment">// 当前数据量大小</span></span><br><span class="line">layout=<span class="string">&quot;total, sizes, prev, pager, next, jumper&quot;</span>   <span class="comment">// 分页器布局</span></span><br><span class="line">:total=<span class="string">&quot;400&quot;</span>                     <span class="comment">// 所有数据的数量</span></span><br><span class="line">&gt; </span><br><span class="line">&lt;/el-pagination&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 改变页面数据量</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">handleSizeChange</span>(<span class="params">val</span>) &#123; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`每页 <span class="subst">$&#123;val&#125;</span> 条`</span>); </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 改变页码</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">handleCurrentChange</span>(<span class="params">val</span>) &#123; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`当前页: <span class="subst">$&#123;val&#125;</span>`</span>); </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">currentPage1</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">currentPage2</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">currentPage3</span>: <span class="number">5</span>, </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">currentPage4</span>: <span class="number">4</span> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//用props接受父组件传过来的数据</span></span><br><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">total</span>: &#123;<span class="comment">//所有数据的总量</span></span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="number">10</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">pageSize</span>: &#123;<span class="comment">//当前页面的数据量</span></span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="number">7</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">currentPage</span>:&#123;<span class="comment">//当前的页码</span></span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line"><span class="comment">//在父组件中定义两个两个自定义事件，定义一个是改变每页的条数，一个是每页的页数</span></span><br><span class="line"> <span class="comment">//分页改变每页的条数</span></span><br><span class="line">    <span class="title function_">handleSizeChange</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">pageSize</span> = val;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentPage</span> = <span class="number">1</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`每页 <span class="subst">$&#123;val&#125;</span> 条`</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//改变每页的页数</span></span><br><span class="line">    <span class="title function_">handleCurrentChange</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentPage</span> = val;</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line"><span class="comment">//我们在子组件中去触发父组件的回调函数，将新的页面数据以及当前的页码传给父组件</span></span><br><span class="line"> <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">// 改页面数据量</span></span><br><span class="line">    <span class="title function_">handleSizeChange</span>(<span class="params">val</span>) &#123;</span><br><span class="line">        <span class="comment">// val值就是新的页面数据量</span></span><br><span class="line">        <span class="comment">// 父组件传过来的自定义事件名：changePageSize</span></span><br><span class="line">        <span class="comment">// 自定义事件其实是一个函数，这里函数需要参数（当前页面数据量，当前页码）</span></span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;changePageSize&quot;</span>, val, <span class="variable language_">this</span>.<span class="property">currentPage</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 改变页码</span></span><br><span class="line">    <span class="title function_">handleCurrentChange</span>(<span class="params">val</span>) &#123;</span><br><span class="line">        <span class="comment">// 同理</span></span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;changePageNo&quot;</span>, val, <span class="variable language_">this</span>.<span class="property">pageSize</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line"><span class="comment">//父组件接受到子组件传过来每页的数据量以及每页的页数进行修改并且重新渲染页面</span></span><br><span class="line"> <span class="comment">//分页改变每页的条数</span></span><br><span class="line">    <span class="title function_">handleSizeChange</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">pageSize</span> = val;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentPage</span> = <span class="number">1</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`每页 <span class="subst">$&#123;val&#125;</span> 条`</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//改变每页的页数</span></span><br><span class="line">    <span class="title function_">handleCurrentChange</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentPage</span> = val;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个时候我们也需要对列表数据进行计算，每页显示条数固定在几条 </span></span><br><span class="line">   &lt;!--<span class="number">1</span>:<span class="number">1</span>-<span class="number">10</span> <span class="number">2</span>:<span class="number">11</span>-<span class="number">20</span> <span class="title function_">slice</span>(当前页数 - <span class="number">1</span>)*每页条数,当前的页数*当前条数--&gt;</span><br><span class="line">    <span class="title function_">compData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">tableData</span>.<span class="title function_">slice</span>(</span><br><span class="line">        (<span class="variable language_">this</span>.<span class="property">currentPage</span> - <span class="number">1</span>) * <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentPage</span> * <span class="variable language_">this</span>.<span class="property">pageSize</span></span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h2 id="通过手写分页的封装"><a href="#通过手写分页的封装" class="headerlink" title="通过手写分页的封装"></a>通过手写分页的封装</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.将分页功能提取出来到公共的组件中</span></span><br><span class="line"> <span class="comment">//上一页</span></span><br><span class="line">&lt;li @click = <span class="string">&quot;prePage()&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="symbol">&amp;laquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span> </span><br><span class="line">&lt;/li&gt;</span><br><span class="line"><span class="comment">//分页列表</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">:class</span>=<span class="string">&quot;pageNo == index ? &#x27;active&#x27;:&#x27;&#x27;&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;index in pages&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">:key</span>= <span class="string">&quot;index&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;curPage(index)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a</span>&gt;</span>&#123;&#123;index&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="comment">//下一页</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="symbol">&amp;raquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//以及将上一页和下一页的事件判断拿过来</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//在父组件中引入注册分页组件</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Pagination</span> /&gt;</span></span> </span><br><span class="line">        </span><br><span class="line"><span class="comment">//父组件在子标签上要传人总页数以及页码</span></span><br><span class="line">     &lt;Pagination / ：pageTotal=&quot;page.pageTotal&quot; :pageNo = &quot;page.pageNo&quot;&gt;  </span><br><span class="line">         </span><br><span class="line">//子组件通过props接受父组件传过来的数据</span><br><span class="line">   props:[&#x27;pageTotal&#x27;,&#x27;pageNo&#x27;]</span><br><span class="line">//子组件通过$emit去触发父组件的事件，并且将当前页点击的页数传给父组件</span><br><span class="line">methords:&#123;</span><br><span class="line">    curPage(i)&#123;</span><br><span class="line">        if(i===&#x27;...&#x27;)return;</span><br><span class="line">        //将当前页点击的页数传给父组件</span><br><span class="line">        this.$emit(&#x27;e-child&#x27;,i)//e-child父组件的事件名随便取</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//父组件通过接受子组件传过来的事件名来接收参数并且触发事件</span><br><span class="line"> &lt;Pagination / ：pageTotal=&quot;page.pageTotal&quot; :pageNo = &quot;page.pageNo&quot; @e-child = &quot;getLists&quot;&gt;  </span><br><span class="line">     </span><br><span class="line">//子组件中的点击上一页也需要判断并且传给父组件</span><br><span class="line">   prePage()&#123;</span><br><span class="line">     if(this.pageNo&gt;1)&#123;//这个时候需要对当前点击的页码进行判断，大于1才能点击上一页</span><br><span class="line">         this.$emit(&#x27;e-child&#x27;,--this.pageNo)</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">//注意：因为子组件不能直接去修改父组件的值，我们需要定义一个变量，在页面刷新的时候将父组件传过来的页码赋值给我们定义的变量</span><br><span class="line">data()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">        curNo:1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mounted():&#123;</span><br><span class="line">   this.curNo = this.pageNo </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//解决省略号通过计算属性对页码和总页数进行计算</span><br><span class="line">computed:&#123;</span><br><span class="line">    pages()&#123;</span><br><span class="line">        let &#123;pageNo:s,pageTodal:t&#125; = this.$props;//要拿到props的数据需要用到$props</span><br><span class="line">        if(t&lt;10) return t;</span><br><span class="line">        if(s&lt;=5)&#123;</span><br><span class="line">            return [1,2,3,4,5,6,&#x27;....&#x27;,t];</span><br><span class="line">        &#125;else if(s&gt;t-5)&#123;</span><br><span class="line">            return [1,&#x27;...&#x27;,t-6,t-5,t-4,t-3,t-2,-t-1,t];</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            return [1,&#x27;...&#x27;,s-2,s-1,s,s+1,s+2,&#x27;...&#x27;,t];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="虚拟滚动长列表的优化"><a href="#虚拟滚动长列表的优化" class="headerlink" title="虚拟滚动长列表的优化"></a>虚拟滚动长列表的优化</h1><h2 id="1-Vue-virtual-Scroller"><a href="#1-Vue-virtual-Scroller" class="headerlink" title="1.Vue-virtual-Scroller"></a>1.Vue-virtual-Scroller</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.安装对应的依赖</span></span><br><span class="line">npm install --save vue-virtual-scroller </span><br><span class="line"></span><br><span class="line"><span class="comment">//配置</span></span><br><span class="line">在main.<span class="property">js</span>中引入</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;vue-virtual-scroller/dist/vue-virtual-scroller.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueVirtualScroller</span> <span class="keyword">from</span> <span class="string">&quot;vue-virtual-scroller&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueVirtualScroller</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//虚拟列表vue</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">virtual-scroller</span> <span class="attr">:items</span>=<span class="string">&quot;items&quot;</span> <span class="attr">item-height</span>=<span class="string">&quot;40&quot;</span> <span class="attr">content-tag</span>=<span class="string">&quot;ul&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;props&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">:key</span>=<span class="string">&quot;props.itemKey&quot;</span>&gt;</span>&#123;&#123;props.item.name&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">virtual-scroller</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> items <span class="keyword">from</span> <span class="string">&quot;./data.json&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123; items &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h1 id="webpack的基本使用"><a href="#webpack的基本使用" class="headerlink" title="webpack的基本使用"></a>webpack的基本使用</h1><h2 id="安装webpack"><a href="#安装webpack" class="headerlink" title="安装webpack?"></a>安装webpack?</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>模块化打包工具</span><br><span class="line">开发：可以有空格，回车，注释。。。</span><br><span class="line">上线：这些都没有</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>安装webpack</span><br><span class="line"><span class="number">1.</span>全局安装</span><br><span class="line">npm i webpack -g</span><br><span class="line">npm i webpack-cli -g</span><br></pre></td></tr></table></figure>
<h2 id="配置webpack"><a href="#配置webpack" class="headerlink" title="配置webpack"></a>配置webpack</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>在webpack的配置文件webpack.<span class="property">config</span>.<span class="property">js</span>文件中有入口文件以及户口文件</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>:<span class="string">&#x27;./&#x27;</span><span class="comment">//入口的配置文件</span></span><br><span class="line">    <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="attr">path</span>:path.<span class="title function_">resolve</span>(_dirname.<span class="string">&#x27;dist&#x27;</span>)<span class="comment">//修改出口文件名</span></span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;./&#x27;</span>可以同步出口的文件名,是打包完后的dist文件下的目录</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>多文件打包为一个文件</span><br><span class="line">问题：多个入口文件===》单文件出口</span><br><span class="line">解决：<span class="attr">entry</span>:[<span class="string">&#x27;./src/a.js&#x27;</span>,<span class="string">&#x27;./src/b.js&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">2.1</span>.多文件打包成多文件</span><br><span class="line">问题：多个入口文件===》多文件出口</span><br><span class="line">解决：<span class="attr">entry</span>:&#123;</span><br><span class="line">    <span class="attr">a</span>:<span class="string">&#x27;./src/a.js&#x27;</span></span><br><span class="line">    <span class="attr">b</span>:<span class="string">&#x27;./src/b.js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="loader和plugin的应用"><a href="#loader和plugin的应用" class="headerlink" title="loader和plugin的应用"></a>loader和plugin的应用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>loader的配置在config.<span class="property">js</span>中使用，使用<span class="title class_">Loader</span>一定要下载loader</span><br><span class="line"><span class="attr">module</span>:[&#123;</span><br><span class="line">    <span class="attr">test</span>:<span class="regexp">/\.css$/</span>,<span class="comment">//结尾是css的文件进行转换</span></span><br><span class="line">    <span class="attr">use</span>:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>]<span class="comment">//转换的时候应该使用那些loader</span></span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>test属性：识别那些文件会被转换</span><br><span class="line"><span class="number">2.</span>use属性：定义在进行转换时，应该使用那个loader</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span><span class="attr">plugin</span>:插件</span><br><span class="line">打包html的插件：html-webpack-plugin</span><br><span class="line"></span><br><span class="line">使用步骤：</span><br><span class="line"><span class="number">1.</span>下载</span><br><span class="line">   npm i html-webpack-plugin</span><br><span class="line"><span class="number">2.</span>引入：</span><br><span class="line">  在config.<span class="property">js</span>中引入<span class="keyword">var</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="number">3.</span>配置</span><br><span class="line">在同级中写入<span class="attr">plugins</span>:[</span><br><span class="line">    <span class="keyword">new</span>  <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="comment">//指定模板页面</span></span><br><span class="line">        <span class="attr">template</span>:<span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">        <span class="comment">//修改默认的文件名</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;./src/xx.html&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">多页面打包就要多次<span class="keyword">new</span>一个新的配置</span><br><span class="line"> <span class="keyword">new</span>  <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="comment">//指定模板页面</span></span><br><span class="line">        <span class="attr">template</span>:<span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">        <span class="comment">//修改默认的文件名</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">      <span class="keyword">new</span>  <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="comment">//指定模板页面</span></span><br><span class="line">        <span class="attr">template</span>:<span class="string">&#x27;./src/xx.html&#x27;</span></span><br><span class="line">        <span class="comment">//修改默认的文件名</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;/xx.html&#x27;</span><span class="comment">//第一个可以不写，第二个一定要写</span></span><br><span class="line">     <span class="comment">//允许注入的配置名</span></span><br><span class="line">     chunks：[</span><br><span class="line">       <span class="comment">//允许注入的文件名</span></span><br><span class="line">     <span class="string">&#x27;jquery&#x27;</span>,<span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">     ],</span><br><span class="line">     <span class="attr">excludeChunks</span>:[<span class="string">&#x27;xx&#x27;</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="打包图片音频视频等"><a href="#打包图片音频视频等" class="headerlink" title="打包图片音频视频等"></a>打包图片音频视频等</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>加载图片的loader</span><br><span class="line">file-loader</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>让html支持图片的loader</span><br><span class="line">html-withimg-loader</span><br><span class="line"></span><br><span class="line"><span class="attr">module</span>:[</span><br><span class="line">    <span class="attr">rules</span>:[&#123;</span><br><span class="line">        <span class="attr">test</span>:<span class="regexp">/\.css$/</span>,<span class="comment">//结尾是css的文件进行转换</span></span><br><span class="line">        <span class="attr">use</span>:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>]<span class="comment">//转换的时候应该使用那些loader</span></span><br><span class="line">    &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="attr">test</span>:<span class="regexp">/\.(png|jpg|jpeg|gif)$/</span>,<span class="comment">//结尾是css的文件进行转换</span></span><br><span class="line">             <span class="attr">use</span>:[&#123;</span><br><span class="line">                 <span class="attr">loader</span>:<span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                 <span class="attr">options</span>:&#123;</span><br><span class="line">                     <span class="attr">esModule</span>:<span class="literal">false</span>,</span><br><span class="line">                     <span class="attr">outputPath</span>:<span class="string">&#x27;img/&#x27;</span></span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">        &#123;</span><br><span class="line">             <span class="attr">test</span>:<span class="regexp">/\.css$/</span>,<span class="comment">//结尾是css的文件进行转换</span></span><br><span class="line">             <span class="attr">use</span>:<span class="string">&#x27;html-withimg-loader&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<h2 id="打包字体图标"><a href="#打包字体图标" class="headerlink" title="打包字体图标"></a>打包字体图标</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>下载字体图标</span><br><span class="line">       &#123;</span><br><span class="line">             <span class="attr">test</span>:<span class="regexp">/\.(eot|svg|ttf|woff|woff2)$/</span>,<span class="comment">//结尾是css的文件进行转换</span></span><br><span class="line">             <span class="attr">use</span>:<span class="string">&#x27;file-loader?name=./fonts/[name].[ext]&#x27;</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<h2 id="压缩打包css文件"><a href="#压缩打包css文件" class="headerlink" title="压缩打包css文件"></a>压缩打包css文件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>单独抽离css文件</span><br><span class="line">下载插件：mini-css-extract-plugin</span><br><span class="line"><span class="number">2.</span>引入插件</span><br><span class="line"> <span class="keyword">var</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="number">3.</span>修改loader配置：</span><br><span class="line"><span class="attr">module</span>:[&#123;</span><br><span class="line">    <span class="attr">test</span>:<span class="regexp">/\.css$/</span>,<span class="comment">//结尾是css的文件进行转换</span></span><br><span class="line">    <span class="attr">use</span>:[<span class="string">&#x27;MiniCssExtractPlugin.loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>]<span class="comment">//转换的时候应该使用那些loader</span></span><br><span class="line">&#125;]</span><br><span class="line"><span class="number">4.</span>使用插件</span><br><span class="line"><span class="keyword">new</span>  <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;./css/[name].css&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>压缩css文件</span><br><span class="line">插件：optimize-css-assets-webpack-plugin</span><br><span class="line">引入插件</span><br><span class="line">使用插件<span class="number">22</span> </span><br></pre></td></tr></table></figure>
<h2 id="打包项目压缩"><a href="#打包项目压缩" class="headerlink" title="打包项目压缩"></a>打包项目压缩</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>将项目中的js文件都放在入口文件中</span><br><span class="line"><span class="number">2.</span>在plugin中的chunks中将配置名都引入</span><br></pre></td></tr></table></figure>
<h2 id="解决表单重复提交的问题"><a href="#解决表单重复提交的问题" class="headerlink" title="解决表单重复提交的问题"></a>解决表单重复提交的问题</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>自定义指令directive</span><br><span class="line">思路： 点击之后当前按钮一定时间内（例如：<span class="built_in">setTimeout</span> 1000ms）不可以再次被点击，相当于节流；</span><br><span class="line">但是如果一个请求1000ms以上还没有返回，那么再次点击就会触发新的请求了。</span><br><span class="line">添加自定义文件 directives.<span class="property">js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> preventReClick = <span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;preventReClick&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">inserted</span>: <span class="keyword">function</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!el.<span class="property">disabled</span>) &#123;</span><br><span class="line">        el.<span class="property">disabled</span> = <span class="literal">true</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          el.<span class="property">disabled</span> = <span class="literal">false</span></span><br><span class="line">        &#125;, binding.<span class="property">value</span> || <span class="number">3000</span>) <span class="comment">// 传入绑定值就使用，默认3000毫秒内不可重复触发</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; preventReClick &#125;</span><br><span class="line"></span><br><span class="line">在main.<span class="property">js</span>中引用</span><br><span class="line"><span class="keyword">import</span> preventReClick <span class="keyword">from</span> <span class="string">&#x27;./plugins/directives.js&#x27;</span> <span class="comment">//防多次点击，重复提交</span></span><br><span class="line"></span><br><span class="line">在按钮上添加v-perventReClick</span><br><span class="line"><span class="comment">// 指定延迟1000ms</span></span><br><span class="line">&lt;el-button  size=<span class="string">&quot;small&quot;</span> type=<span class="string">&quot;primary&quot;</span> @click=<span class="string">&quot;handleSave()&quot;</span> v-preventReClick=<span class="string">&quot;1000&quot;</span>&gt;保 存&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认延迟时间3000</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span>  <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleSave()&quot;</span> <span class="attr">v-preventReClick</span>&gt;</span>保 存<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>在session中存放一个特殊的标识</span><br><span class="line">在服务器端，生成一个唯一的标识符，将它存入session，同时将它写入表单的隐藏字段中，然后将表单页面发给浏览器，用户录入信息后点击提交，在服务器端，获取表单中隐藏字段的值，与session中的唯一标识符比较，相等说明是首次提交，就处理本次请求，然后将session中的唯一标识符移除；不相等说明是重复提交，就不再处理。</span><br></pre></td></tr></table></figure>
<h2 id="原生的拖拽部分"><a href="#原生的拖拽部分" class="headerlink" title="原生的拖拽部分"></a>原生的拖拽部分</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>利用h5的draggable属性在需要添加的div绑定</span><br><span class="line">在拖动的图片上去绑定对应的效果：</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragstart&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;5px dashed red&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">当拖动结束后要取消边框</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragend&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">也可以在拖动进行时，将边框取消,实现同步的效果</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragend&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    empty.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;none &#x27;</span></span><br><span class="line">&#125;，<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">设置一个变量</span><br><span class="line"><span class="keyword">let</span> name;</span><br><span class="line"></span><br><span class="line">因为每张图片都设置了一个alt属性，就可以使每张图片都可以导致变量有不同的值，当图片进入到空元素的时候在利用这个变量name去改变元素中的内容，最后在拖拽结束的时候把上方的文字复原即可</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragend&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    empty.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;none &#x27;</span></span><br><span class="line">    h1.<span class="property">innerHTML</span> = <span class="string">&#x27;拖动你喜欢的图案到衣服上把&#x27;</span>；</span><br><span class="line">    h1.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;black&#x27;</span>;</span><br><span class="line">&#125;，<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">当图片进入空元素的时候利用变量去改变元素中的内容</span><br><span class="line">empty.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragenter&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    h1.<span class="property">innerHTML</span> = name;</span><br><span class="line">    h1.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">&#125;,<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">鼠标松开放置的事件,利用appendChild的方法进行节点的添加</span><br><span class="line">empty.<span class="title function_">addEventListener</span>(<span class="string">&#x27;drop&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;  e.<span class="property">target</span>.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">`img[alt=<span class="subst">$&#123;name&#125;</span>]`</span>))</span><br><span class="line">&#125;,<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<h2 id="倒计时的实现"><a href="#倒计时的实现" class="headerlink" title="倒计时的实现"></a>倒计时的实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>创建天时分秒的变量</span><br><span class="line"><span class="keyword">const</span> daySpan = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;./daySpan&#x27;</span>),</span><br><span class="line">      hourSpan = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;./hourSpan&#x27;</span>),</span><br><span class="line">      miunteSpan = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;./miunteSpan&#x27;</span>),</span><br><span class="line">      secondSpan = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;./secondSpan&#x27;</span>),</span><br><span class="line">      deadline = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2020-6-18 00:00&#x27;</span>);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">coundown</span> ()&#123;</span><br><span class="line">       <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>(),timeRemainning = deadline -now;</span><br><span class="line">       <span class="keyword">let</span> day,hour,minute,second;</span><br><span class="line">       <span class="comment">//判断当前的时间戳小于0就超出了截止日期了，分别把时间戳的秒数取整后赋值给变量</span></span><br><span class="line">       <span class="keyword">if</span>(timeRemainning&lt;<span class="number">0</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">       second = <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeRemaining/ <span class="number">1000</span>% <span class="number">60</span>);</span><br><span class="line">       minute = <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeRemaining / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> % <span class="number">60</span>);</span><br><span class="line">       day =   <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeRemaining / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> % <span class="number">24</span>);</span><br><span class="line">       </span><br><span class="line">       daySpan.<span class="property">innerHTML</span> = day + <span class="string">&#x27;天&#x27;</span>；</span><br><span class="line">       hourSpan.<span class="property">innerHTML</span> = hour + <span class="string">&#x27;时&#x27;</span>；</span><br><span class="line">       minuteSpan.<span class="property">innerHTML</span> = minute + <span class="string">&#x27;分&#x27;</span>;</span><br><span class="line">       secondSpan.<span class="property">innerHtml</span> = second + <span class="string">&#x27;秒&#x27;</span>;</span><br><span class="line">       </span><br><span class="line">       <span class="built_in">setTimeout</span>(countdown,<span class="number">1000</span>);</span><br><span class="line">   &#125;</span><br><span class="line"><span class="title function_">countdown</span>()</span><br></pre></td></tr></table></figure>
<h1 id="Echarts的基本使用"><a href="#Echarts的基本使用" class="headerlink" title="Echarts的基本使用"></a>Echarts的基本使用</h1><h2 id="echarts的用法"><a href="#echarts的用法" class="headerlink" title="echarts的用法"></a>echarts的用法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>柱形图</span><br><span class="line">通过el-card去准备一个容器</span><br><span class="line">  &lt;el-card&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">   &lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">在mounted中获得表格的容器</span><br><span class="line"><span class="comment">// 1. 获取表格容器</span></span><br><span class="line"><span class="keyword">let</span> myChart = <span class="variable language_">this</span>.<span class="property">$echarts</span>.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main1&quot;</span>));</span><br><span class="line"><span class="comment">//2。设置各组件的样式</span></span><br><span class="line"> myChart.<span class="title function_">setOption</span>(&#123;</span><br><span class="line">      <span class="comment">//表头</span></span><br><span class="line">      <span class="attr">title</span>: &#123;<span class="comment">//标题</span></span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;高薪就业,迎娶白富美&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//提示框</span></span><br><span class="line">      <span class="attr">tooltip</span>: &#123;&#125;,</span><br><span class="line">      <span class="comment">//x轴</span></span><br><span class="line">      <span class="attr">xAxis</span>: &#123;<span class="comment">//x轴显示的</span></span><br><span class="line">        <span class="attr">data</span>: [<span class="string">&quot;一班&quot;</span>, <span class="string">&quot;二班&quot;</span>, <span class="string">&quot;三班&quot;</span>, <span class="string">&quot;四班&quot;</span>, <span class="string">&quot;五班&quot;</span>, <span class="string">&quot;六班&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//y轴</span></span><br><span class="line">      <span class="attr">yAxis</span>: &#123;&#125;,</span><br><span class="line">      <span class="comment">//展示数据</span></span><br><span class="line">      <span class="attr">series</span>: [<span class="comment">//鼠标移动显示的</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;人数&quot;</span>,</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&quot;bar&quot;</span>, <span class="comment">//柱状图</span></span><br><span class="line">          <span class="attr">data</span>: [<span class="number">45</span>, <span class="number">42</span>, <span class="number">46</span>, <span class="number">48</span>, <span class="number">52</span>, <span class="number">47</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>折线图</span><br><span class="line"><span class="number">1.</span>现在create中请求数据，拿到对应的数据</span><br><span class="line"><span class="number">2.</span>在methods中将legend：数据概览  xAxis：底部的数据 series：鼠标悬浮的一个数值作为参数</span><br><span class="line"><span class="number">3.</span>获得容器</span><br><span class="line"><span class="number">4.</span>在options中设置样式</span><br></pre></td></tr></table></figure>
<h2 id="地图"><a href="#地图" class="headerlink" title="地图"></a>地图</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>首先拿到地图的json的数据</span><br><span class="line"><span class="number">2.</span>获取容器，注册可用的地图，包括geo组件或者map图表类型的时候才能使用</span><br><span class="line"><span class="number">3.</span>在option中去设置：</span><br><span class="line">地图的背景颜色</span><br><span class="line">在geo组件中配置地图的长宽比</span><br><span class="line">颜色的渐变</span><br><span class="line">然后配置地图的相关参数图表的相关设置</span><br><span class="line">显示文字</span><br><span class="line">设置地图的文字颜色</span><br><span class="line">鼠标移动地图上显示的高亮颜色</span><br><span class="line">在此设置地图的颜色显示</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="thress-js展示3d环绕效果"><a href="#thress-js展示3d环绕效果" class="headerlink" title="thress.js展示3d环绕效果"></a>thress.js展示3d环绕效果</h1><h2 id="thress的应用"><a href="#thress的应用" class="headerlink" title="thress的应用"></a>thress的应用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>首先3d环绕是靠天空盒六张图片展现的场景</span><br><span class="line"><span class="number">2.</span>安装依赖</span><br><span class="line">    <span class="comment">// npm 安装使用</span></span><br><span class="line">    npm install three</span><br><span class="line">    <span class="comment">// 引用</span></span><br><span class="line">    <span class="keyword">import</span> * <span class="keyword">as</span> <span class="variable constant_">THREE</span> <span class="keyword">from</span> <span class="string">&#x27;three&#x27;</span></span><br><span class="line"><span class="number">3.</span>在tress.<span class="property">js</span>中最重要的<span class="number">3</span>个因素：场景sscene，相机camera，渲染器renderer</span><br><span class="line"><span class="number">4.</span>创建场景</span><br><span class="line">  <span class="keyword">const</span> scene = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Scene</span>()</span><br><span class="line"><span class="number">5.</span>创建一个透视相机</span><br><span class="line"> <span class="keyword">const</span> camera = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PerspectiveCamera</span>( <span class="number">45</span>, width / height, <span class="number">1</span>, <span class="number">1000</span> );</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>相机参数</span><br><span class="line"><span class="title class_">PerspectiveCamera</span>( fov : <span class="title class_">Number</span>, aspect : <span class="title class_">Number</span>, near : <span class="title class_">Number</span>, far : <span class="title class_">Number</span> )</span><br><span class="line">fov — 摄像机视锥体垂直视野角度</span><br><span class="line">aspect — 摄像机视锥体长宽比</span><br><span class="line">near — 摄像机视锥体近端面</span><br><span class="line">far — 摄像机视锥体远端面</span><br><span class="line">只有离相机的距离大于near值，小于far值，且在相机的可视角度之内，才能被相机投影到。</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>创建正交投影相机(三视图)</span><br><span class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">OrthographicCamera</span>( width / - <span class="number">2</span>, width / <span class="number">2</span>, height / <span class="number">2</span>, height / - <span class="number">2</span>, <span class="number">1</span>, <span class="number">1000</span> );</span><br><span class="line"></span><br><span class="line"><span class="number">8.</span>相机参数</span><br><span class="line"><span class="title class_">OrthographicCamera</span>( left : <span class="title class_">Number</span>, right : <span class="title class_">Number</span>, top : <span class="title class_">Number</span>, bottom : <span class="title class_">Number</span>, near : <span class="title class_">Number</span>, far : <span class="title class_">Number</span> )</span><br><span class="line">left — 摄像机视锥体左侧面。</span><br><span class="line">right — 摄像机视锥体右侧面。</span><br><span class="line">top — 摄像机视锥体上侧面。</span><br><span class="line">bottom — 摄像机视锥体下侧面。</span><br><span class="line">near — 摄像机视锥体近端面。</span><br><span class="line">far — 摄像机视锥体远端面。</span><br><span class="line"></span><br><span class="line"><span class="number">9.</span>渲染器(renderer)</span><br><span class="line">渲染器决定了渲染的结果应该画在页面的什么元素上面，并且以怎样的方式来绘制</span><br><span class="line"> <span class="keyword">var</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>();</span><br><span class="line">    renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>,             <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(renderer.<span class="property">domElement</span>);</span><br><span class="line">渲染器renderer的domElement元素，表示渲染器中的画布，所有的渲染都是画在domElement上的，所以这里的appendChild表示将这个domElement挂接在body下面，这样渲染的结果就能够在页面中显示了</span><br><span class="line"></span><br><span class="line">世界雏形：</span><br><span class="line"><span class="comment">// 初始化场景</span></span><br><span class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Scene</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化透视相机</span></span><br><span class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PerspectiveCamera</span>(<span class="number">75</span>, <span class="variable language_">window</span>.<span class="property">innerWidth</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span>, <span class="number">0.1</span>, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置相机位置</span></span><br><span class="line">    camera.<span class="property">position</span>.<span class="property">z</span> = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化渲染器, 并将画布添加到页面元素中</span></span><br><span class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>()</span><br><span class="line">    renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(renderer.<span class="property">domElement</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 渲染场景和相机</span></span><br><span class="line">    renderer.<span class="title function_">render</span>(scene, camera)</span><br><span class="line"></span><br><span class="line">几何体(geomentry)：几何体就像物体的血肉,决定了物体长什么样子。</span><br><span class="line">  <span class="comment">// 添加立方体</span></span><br><span class="line">    <span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BoxGeometry</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建物体</span></span><br><span class="line">    <span class="keyword">var</span> mesh = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>( geometry)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将物体添加到场景中</span></span><br><span class="line">    scene.<span class="title function_">add</span>(mesh)</span><br><span class="line"></span><br><span class="line">创建材质：材质就像物体的皮肤，决定了几何体的外表, 不同的材质渲染出不同的效果, 比如一个几何体看起来是否像金属、透明与否、或者显示为线框。</span><br><span class="line"><span class="comment">// 添加立方体</span></span><br><span class="line">    <span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BoxGeometry</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建材质</span></span><br><span class="line">    material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123; <span class="attr">color</span>: <span class="number">0xFF0000</span> &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建物体</span></span><br><span class="line">    <span class="keyword">var</span> mesh = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>( geometry, material)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将物体添加到场景中</span></span><br><span class="line">    scene.<span class="title function_">add</span>(mesh)</span><br><span class="line"></span><br><span class="line">渲染循环：</span><br><span class="line">调用requestAnimationFrame方法对整个场景进行实时渲染</span><br><span class="line"><span class="comment">// 渲染</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">render</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        renderer.<span class="title function_">render</span>(scene, camera)</span><br><span class="line">        <span class="title function_">requestAnimationFrame</span>(render)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>()</span><br><span class="line"></span><br><span class="line">轨道控制(<span class="title class_">OrbitControls</span>):使用控制器实现移动、改变视角等效果</span><br><span class="line"> <span class="keyword">import</span> &#123; <span class="title class_">OrbitControls</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/controls/OrbitControls&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> container = renderer.<span class="property">domElement</span></span><br><span class="line">    <span class="comment">// 添加控制器</span></span><br><span class="line">    <span class="keyword">const</span> controls = <span class="keyword">new</span> <span class="title class_">OrbitControls</span>(camera, container)</span><br><span class="line">    <span class="comment">// 启用惯性</span></span><br><span class="line">    controls.<span class="property">enableDamping</span> = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// 相机向外移动极限</span></span><br><span class="line">    controls.<span class="property">maxDistance</span> = <span class="number">4.5</span></span><br><span class="line">在加入渲染循环和轨道控制器之后，为了展示效果更明显，我们将<span class="number">6</span>个面涂上不同的颜色:</span><br><span class="line">    <span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BoxGeometry</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">    <span class="keyword">const</span> colors = [</span><br><span class="line">        &#123; <span class="attr">color</span>: <span class="number">0xff0000</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">color</span>: <span class="number">0x00ff00</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">color</span>: <span class="number">0x0000ff</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">color</span>: <span class="number">0xff00ff</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">color</span>: <span class="number">0xffff00</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">color</span>: <span class="number">0x00ffff</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">const</span> material = []</span><br><span class="line">    <span class="comment">// 将6个面涂上不同的颜色</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>, len=colors.<span class="property">length</span>; i&lt;len; i++) &#123;</span><br><span class="line">        material.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(colors[i]))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 创建物体</span></span><br><span class="line">    <span class="keyword">var</span> mesh = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>( geometry, material)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将物体添加到场景中</span></span><br><span class="line">    scene.<span class="title function_">add</span>(mesh)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">天空盒贴图：</span><br><span class="line">使用.<span class="title class_">TextureLoader</span>()加载图片，转化为纹理，通过属性map设置材质纹理。就实现了简单的纹理加载</span><br><span class="line">    <span class="comment">// 添加立方体</span></span><br><span class="line">    <span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BoxGeometry</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">    <span class="comment">// 左右、上下、后前</span></span><br><span class="line">    <span class="keyword">const</span> urls = [</span><br><span class="line">        <span class="string">&#x27;https://cdn.huodao.hk/upload_img/20220620/3e532822bd445485d27677ca55a79b10.jpg?proportion=1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://cdn.huodao.hk/upload_img/20220620/cebf6fbcafdf4f5c945e0881418e34ec.jpg?proportion=1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://cdn.huodao.hk/upload_img/20220620/273081d1896fc66866842543090916d3.jpg?proportion=1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://cdn.huodao.hk/upload_img/20220620/8747f61fd2215aa748dd2afb6dce3822.jpg?proportion=1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://cdn.huodao.hk/upload_img/20220620/c34262935511d61b2e9f456b689f5c1c.jpg?proportion=1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://cdn.huodao.hk/upload_img/20220620/722d2bf88f6087800ddf116511b51e73.jpg?proportion=1&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">const</span> boxMaterial = []</span><br><span class="line"></span><br><span class="line">    urls.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 纹理加载</span></span><br><span class="line">        <span class="keyword">const</span> texture = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TextureLoader</span>().<span class="title function_">load</span>(item)</span><br><span class="line">        <span class="comment">// 通过旋转修复天花板和地板</span></span><br><span class="line">        <span class="keyword">if</span> (item == <span class="string">&#x27;4_u&#x27;</span> || item == <span class="string">&#x27;4_d&#x27;</span>) &#123;</span><br><span class="line">        texture.<span class="property">rotation</span> = <span class="title class_">Math</span>.<span class="property">PI</span></span><br><span class="line">        texture.<span class="property">center</span> = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Vector2</span>(<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 创建材质</span></span><br><span class="line">        boxMaterial.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123; <span class="attr">map</span>: texture &#125;))</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> house = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(geometry, boxMaterial)</span><br><span class="line">    house.<span class="property">geometry</span>.<span class="title function_">scale</span>(<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">    scene.<span class="title function_">add</span>(house)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">全景图片贴图</span><br><span class="line">全景图贴图就是使用一张鱼眼全景图片以纹理的形式添加到球体上，如地球仪</span><br><span class="line"> <span class="keyword">const</span> url = <span class="string">&#x27;https://cdn.huodao.hk/upload_img/20220621/6bd594e62ea5654c03d7b82718443751.png?proportion=1.99&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">SphereGeometry</span>(<span class="number">5</span>, <span class="number">32</span>, <span class="number">32</span>)</span><br><span class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TextureLoader</span>().<span class="title function_">load</span>(url)</span><br><span class="line">    <span class="keyword">const</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123; <span class="attr">map</span>: texture &#125;)</span><br><span class="line">    <span class="keyword">const</span> sphere = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(geometry, material)</span><br><span class="line">    sphere.<span class="property">geometry</span>.<span class="title function_">scale</span>(<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">    scene.<span class="title function_">add</span>(sphere)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Sprite</span>(精灵模型)：<span class="title class_">Sprite</span>的特点是无论旋转到什么角度，sprite所制作的元素都是正对着相机，可以理解为像向日葵始终正面朝向相机。</span><br><span class="line"> <span class="title function_">createSprite</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> url = <span class="string">&#x27;https://cdn.huodao.hk/upload_img/20220621/1eca2b6efe7aab01d42ca45345f46a90.png?proportion=0.98&#x27;</span></span><br><span class="line">        <span class="keyword">const</span> texture = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TextureLoader</span>().<span class="title function_">load</span>(url)</span><br><span class="line">        <span class="keyword">const</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">SpriteMaterial</span>(&#123; <span class="attr">map</span>: texture &#125;)</span><br><span class="line">        <span class="keyword">const</span> sprite = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Sprite</span>(material)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置大小、位置、内容</span></span><br><span class="line">        sprite.<span class="property">scale</span>.<span class="title function_">set</span>(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">        sprite.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">0.4</span>, <span class="number">0</span>, -<span class="number">4.5</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 加入场景中</span></span><br><span class="line">        scene.<span class="title function_">add</span>(sprite)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Raycaster</span>（光线投射）</span><br><span class="line">在3D空间要想点击我们上面创建的精灵模型, 要用到<span class="title class_">Raycaster</span>（光线投射）, 原理就是在你鼠标点击的位置发射一根射线，被这根射线射中的物体都被记录下来。然后在根据被记录下来的物体去判断点中的物体。</span><br><span class="line">在光线投射之前，我们要做以下几步</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>获取鼠标在屏幕的坐标</span><br><span class="line"><span class="number">2.</span>屏幕坐标转标准设备坐标</span><br><span class="line"><span class="number">3.</span>标准设备坐标转世界坐标</span><br><span class="line"></span><br><span class="line">根据世界坐标和相机生成：射线投射方向单位向量，再根据射线投射方向单位向量创建射线投射器对象</span><br><span class="line">    <span class="title class_">GoToRoom</span>(e) &#123;</span><br><span class="line">        e.<span class="title function_">preventDefault</span>()</span><br><span class="line">        <span class="keyword">const</span> &#123; clientX, clientY &#125; = e</span><br><span class="line">        <span class="keyword">const</span> dom = renderer.<span class="property">domElement</span></span><br><span class="line">        <span class="comment">// 拿到canvas画布到屏幕的距离</span></span><br><span class="line">        <span class="keyword">const</span> domRect = dom.<span class="title function_">getBoundingClientRect</span>()</span><br><span class="line">        <span class="comment">// 计算标准设备坐标 - 归一化设备坐标</span></span><br><span class="line">        <span class="keyword">const</span> x = ((clientX - domRect.<span class="property">left</span>) / dom.<span class="property">clientWidth</span>) * <span class="number">2</span> - <span class="number">1</span></span><br><span class="line">        <span class="keyword">const</span> y = -((clientY - domRect.<span class="property">top</span>) / dom.<span class="property">clientHeight</span>) * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">        <span class="keyword">const</span> vector = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Vector3</span>(x, y)</span><br><span class="line">        <span class="comment">// 转世界坐标</span></span><br><span class="line">        <span class="keyword">const</span> worldVector = vector.<span class="title function_">unproject</span>(camera)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;世界坐标&#x27;</span>, worldVector)</span><br><span class="line">        <span class="comment">// 向量相减，并获取单位向量</span></span><br><span class="line">        <span class="keyword">const</span> ray = worldVector.<span class="title function_">sub</span>(camera.<span class="property">position</span>).<span class="title function_">normalize</span>()</span><br><span class="line">        <span class="comment">// 射线投射对象， 第一个参数是射线原点 第二个参数是射线方向</span></span><br><span class="line">        <span class="keyword">const</span> raycaster = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Raycaster</span>(camera.<span class="property">position</span>, ray)</span><br><span class="line">        raycaster.<span class="property">camera</span> = camera</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回射线选中的对象 //第一个参数是检测的目标对象 第二个参数是目标对象的子元素</span></span><br><span class="line">        <span class="keyword">const</span> intersects= raycaster.<span class="title function_">intersectObjects</span>(scene.<span class="property">children</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (intersects.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;捕获到对象&quot;</span>, intersects);</span><br><span class="line">            <span class="keyword">const</span> intersect = intersects[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">if</span> (intersect.<span class="property">object</span>?.<span class="property">type</span> == <span class="string">&quot;Sprite&quot;</span> &amp;&amp; intersect.<span class="property">object</span>?.<span class="property">content</span>?.<span class="property">isComeAround</span>) &#123;</span><br><span class="line">            <span class="comment">// 清除当前房间和精灵模型</span></span><br><span class="line">            scene.<span class="title function_">remove</span>(sphere)</span><br><span class="line">            scene.<span class="title function_">remove</span>(sprite)</span><br><span class="line">            <span class="keyword">if</span> (intersect.<span class="property">object</span>?.<span class="property">content</span>?.<span class="property">to</span> == <span class="string">&#x27;小明家&#x27;</span>) &#123;</span><br><span class="line">                cube = cube || <span class="variable language_">this</span>.<span class="title function_">createCube</span>()</span><br><span class="line">                scene.<span class="title function_">add</span>(cube)</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;没捕获到对象&quot;</span>); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">initEvent</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="variable language_">this</span>.<span class="property">GoToRoom</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">全部代码：</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;three&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- &lt;img src=&quot;../../public/assets/kt_b.jpg&quot; alt=&quot;&quot;&gt; --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import * as THREE from &#x27;three&#x27;</span><br><span class="line">  import &#123; OrbitControls &#125; from &#x27;three/examples/jsm/controls/OrbitControls&#x27;</span><br><span class="line">  import &#123; FBXLoader &#125; from &#x27;three/examples/jsm/loaders/FBXLoader&#x27;</span><br><span class="line">  let scene = null</span><br><span class="line">  let camera = null</span><br><span class="line">  let renderer = null</span><br><span class="line">  let cube = null</span><br><span class="line">  let sphere = null</span><br><span class="line">  let sprite = null</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &quot;HelloWorld&quot;,</span><br><span class="line">    props: &#123;</span><br><span class="line">      msg: String,</span><br><span class="line">    &#125;,</span><br><span class="line">    data()&#123;</span><br><span class="line">      return &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      window.removeEventListener(&#x27;click&#x27;, this.GoToRoom)</span><br><span class="line">      this.init()</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      init() &#123;</span><br><span class="line">        // 初始化场景</span><br><span class="line">        this.initScene()</span><br><span class="line">        // 初始化相机</span><br><span class="line">        this.initcamera()</span><br><span class="line">        // 构建渲染器</span><br><span class="line">        this.initRenderer()</span><br><span class="line">        // 创建立方体</span><br><span class="line">        this.createCube()</span><br><span class="line">        // 创建球体</span><br><span class="line">        // this.createSphere()</span><br><span class="line">        // 添加房屋模型</span><br><span class="line">        // this.loadRoomModel()</span><br><span class="line">        // 添加光源</span><br><span class="line">        this.addLight()</span><br><span class="line">        // 交互点</span><br><span class="line">        // this.createSprite()</span><br><span class="line">        // 渲染循环</span><br><span class="line">        this.render()</span><br><span class="line">        // 初始化事件</span><br><span class="line">        this.initEvent()</span><br><span class="line">      &#125;,</span><br><span class="line">      initScene() &#123;</span><br><span class="line">        scene = new THREE.Scene()</span><br><span class="line">      &#125;,</span><br><span class="line">      initcamera() &#123;</span><br><span class="line">        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)</span><br><span class="line">        camera.position.z = 0.5</span><br><span class="line">        // camera.position.y = 10</span><br><span class="line">        // camera.position.x = 10</span><br><span class="line">      &#125;,</span><br><span class="line">      initRenderer() &#123;</span><br><span class="line">        renderer = new THREE.WebGLRenderer()</span><br><span class="line">        renderer.setSize(window.innerWidth, window.innerHeight)</span><br><span class="line">        // 添加控制器</span><br><span class="line">        this.initControls(renderer.domElement)</span><br><span class="line">        // 将渲染元素添加到页面</span><br><span class="line">        this.$refs.three.appendChild(renderer.domElement)</span><br><span class="line">      &#125;,</span><br><span class="line">      createCube() &#123;</span><br><span class="line">        const geometry = new THREE.BoxGeometry(10, 10, 10)</span><br><span class="line">        const colors = [</span><br><span class="line">          &#123; color: 0xff0000 &#125;,</span><br><span class="line">          &#123; color: 0x00ff00 &#125;,</span><br><span class="line">          &#123; color: 0x0000ff &#125;,</span><br><span class="line">          &#123; color: 0xff00ff &#125;,</span><br><span class="line">          &#123; color: 0xffff00 &#125;,</span><br><span class="line">          &#123; color: 0x00ffff &#125;</span><br><span class="line">        ]</span><br><span class="line">        const material = []</span><br><span class="line">        for(let i=0, len=colors.length; i&lt;len; i++) &#123;</span><br><span class="line">          material.push(new THREE.MeshBasicMaterial(colors[i]))</span><br><span class="line">        &#125;</span><br><span class="line">        // 纹理贴图</span><br><span class="line">        // const material = this.texture()</span><br><span class="line">        cube = new THREE.Mesh(geometry, material)</span><br><span class="line">        // 内外翻转</span><br><span class="line">        // cube.geometry.scale(1, 1, -1)</span><br><span class="line">        scene.add(cube)</span><br><span class="line">      &#125;,</span><br><span class="line">      texture() &#123;</span><br><span class="line">        // 左右、上下、后前</span><br><span class="line">        const urls = [</span><br><span class="line">          &#x27;http://cdn.huodao.hk/upload_img/20220620/3e532822bd445485d27677ca55a79b10.jpg?proportion=1&#x27;,</span><br><span class="line">          &#x27;http://cdn.huodao.hk/upload_img/20220620/cebf6fbcafdf4f5c945e0881418e34ec.jpg?proportion=1&#x27;,</span><br><span class="line">          &#x27;http://cdn.huodao.hk/upload_img/20220620/273081d1896fc66866842543090916d3.jpg?proportion=1&#x27;,</span><br><span class="line">          &#x27;http://cdn.huodao.hk/upload_img/20220620/8747f61fd2215aa748dd2afb6dce3822.jpg?proportion=1&#x27;,</span><br><span class="line">          &#x27;http://cdn.huodao.hk/upload_img/20220620/c34262935511d61b2e9f456b689f5c1c.jpg?proportion=1&#x27;,</span><br><span class="line">          &#x27;http://cdn.huodao.hk/upload_img/20220620/722d2bf88f6087800ddf116511b51e73.jpg?proportion=1&#x27;</span><br><span class="line">        ]</span><br><span class="line">        const material = []</span><br><span class="line">        for(let i=0, len=urls.length; i&lt;len; i++) &#123;</span><br><span class="line">          const texture = new THREE.TextureLoader().load(urls[i])</span><br><span class="line">          if (i == 2 || i==3) &#123;</span><br><span class="line">            texture.rotation = Math.PI</span><br><span class="line">            texture.center = new THREE.Vector2(0.5, 0.5)</span><br><span class="line">          &#125;</span><br><span class="line">          material.push(new THREE.MeshBasicMaterial(&#123; map: texture &#125;))</span><br><span class="line">        &#125;</span><br><span class="line">        return material</span><br><span class="line">      &#125;,</span><br><span class="line">      createSphere() &#123;</span><br><span class="line">        const url = &#x27;http://cdn.huodao.hk/upload_img/20220621/6bd594e62ea5654c03d7b82718443751.png?proportion=1.99&#x27;</span><br><span class="line">        const geometry = new THREE.SphereGeometry(5, 32, 32)</span><br><span class="line">        const texture = new THREE.TextureLoader().load(url)</span><br><span class="line">        const material = new THREE.MeshBasicMaterial(&#123; map: texture &#125;)</span><br><span class="line">        sphere = new THREE.Mesh(geometry, material)</span><br><span class="line">        sphere.geometry.scale(1, 1, -1)</span><br><span class="line">        scene.add(sphere)</span><br><span class="line">      &#125;,</span><br><span class="line">      createSprite() &#123;</span><br><span class="line">        const url = &#x27;http://cdn.huodao.hk/upload_img/20220621/1eca2b6efe7aab01d42ca45345f46a90.png?proportion=0.98&#x27;</span><br><span class="line">        const texture = new THREE.TextureLoader().load(url)</span><br><span class="line">        const material = new THREE.SpriteMaterial(&#123; map: texture &#125;)</span><br><span class="line">        sprite = new THREE.Sprite(material)</span><br><span class="line">        </span><br><span class="line">        // 设置大小、位置、内容</span><br><span class="line">        sprite.scale.set(0.5, 0.5, 0.5)</span><br><span class="line">        sprite.position.set(0.4, 0, -4.5)</span><br><span class="line">        sprite.content = &#123;</span><br><span class="line">          title: &#x27;串门&#x27;,</span><br><span class="line">          to: &#x27;小明家&#x27;,</span><br><span class="line">          isComeAround: true</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 加入场景中</span><br><span class="line">        scene.add(sprite)</span><br><span class="line">      &#125;,</span><br><span class="line">      loadRoomModel() &#123;</span><br><span class="line">        const loader = new FBXLoader()</span><br><span class="line">        loader.load(&#x27;/assets/untitled.fbx&#x27;, (fbx) =&gt; &#123;</span><br><span class="line">          console.log(&#x27;fbx--&#x27;, fbx)</span><br><span class="line">          fbx.scale.set(0.01, 0.01, 0.01)</span><br><span class="line">          scene.add(fbx)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      addLight() &#123;</span><br><span class="line">        // 添加半球光源 -- 户外效果</span><br><span class="line">        const light = new THREE.HemisphereLight(0xffffff, 0x444444)</span><br><span class="line">        light.position.set(0, 200, 0)</span><br><span class="line">        scene.add(light)</span><br><span class="line">      &#125;,</span><br><span class="line">      render() &#123;</span><br><span class="line">        renderer.render(scene, camera)</span><br><span class="line">        requestAnimationFrame(this.render)</span><br><span class="line">      &#125;,</span><br><span class="line">      initControls(container) &#123;</span><br><span class="line">        const controls = new OrbitControls(camera, container)</span><br><span class="line">        controls.enableDamping = true</span><br><span class="line">        controls.maxDistance = 50</span><br><span class="line">      &#125;,</span><br><span class="line">      GoToRoom(e) &#123;</span><br><span class="line">        e.preventDefault()</span><br><span class="line">        const &#123; clientX, clientY &#125; = e</span><br><span class="line">        const dom = renderer.domElement</span><br><span class="line">        // 拿到canvas画布到屏幕的距离</span><br><span class="line">        const domRect = dom.getBoundingClientRect()</span><br><span class="line">        // 计算标准设备坐标</span><br><span class="line">        const x = ((clientX - domRect.left) / dom.clientWidth) * 2 - 1</span><br><span class="line">        const y = -((clientY - domRect.top) / dom.clientHeight) * 2 + 1</span><br><span class="line">        console.log(&#x27;计算标准设备坐标--&#x27;, clientX, clientY, x, y, domRect, dom.clientWidth, dom.clientHeight)</span><br><span class="line">        const vector = new THREE.Vector3(x, y)</span><br><span class="line">        // 转世界坐标</span><br><span class="line">        const worldVector = vector.unproject(camera)</span><br><span class="line">        console.log(&#x27;转世界坐标&#x27;, worldVector)</span><br><span class="line">        // 射线</span><br><span class="line">        const ray = worldVector.sub(camera.position).normalize()</span><br><span class="line">        // 射线投射对象</span><br><span class="line">        const raycaster = new THREE.Raycaster(camera.position, ray)</span><br><span class="line">        raycaster.camera = camera</span><br><span class="line"></span><br><span class="line">        //返回射线选中的对象 //第一个参数是检测的目标对象 第二个参数是目标对象的子元素</span><br><span class="line">        const intersects= raycaster.intersectObjects(scene.children)</span><br><span class="line"></span><br><span class="line">        if (intersects.length &gt; 0) &#123;</span><br><span class="line">          console.log(&quot;捕获到对象&quot;, intersects);</span><br><span class="line">          const intersect = intersects[0]</span><br><span class="line">          if (intersect.object?.type == &quot;Sprite&quot; &amp;&amp; intersect.object?.content?.isComeAround) &#123;</span><br><span class="line">            // 清除当前房间和精灵模型</span><br><span class="line">            scene.remove(sphere)</span><br><span class="line">            scene.remove(sprite)</span><br><span class="line">            if (intersect.object?.content?.to == &#x27;小明家&#x27;) &#123;</span><br><span class="line">              cube = cube || this.createCube()</span><br><span class="line">              scene.add(cube)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          console.log(&quot;没捕获到对象&quot;); </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      initEvent() &#123;</span><br><span class="line">        window.addEventListener(&#x27;click&#x27;, this.GoToRoom)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Add &quot;scoped&quot; attribute to limit CSS to this component only --&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="单点登录"><a href="#单点登录" class="headerlink" title="单点登录"></a>单点登录</h1><h2 id="什么是单点登录？"><a href="#什么是单点登录？" class="headerlink" title="什么是单点登录？"></a>什么是单点登录？</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>什么是单点登录？</span><br><span class="line">单点登录的英文名叫做：<span class="title class_">Single</span> <span class="title class_">Sign</span> <span class="title class_">On</span>（简称<span class="variable constant_">SSO</span>），指在同一帐号平台下的多个应用系统中，用户只需登录一次，即可访问所有相互信任的系统。简而言之，多个系统，统一登陆。</span><br></pre></td></tr></table></figure>
<h2 id="单点登录的原理？"><a href="#单点登录的原理？" class="headerlink" title="单点登录的原理？"></a>单点登录的原理？</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>单点登录的原理？</span><br><span class="line">sso需要一个独立的认证中心，所有子系统都通过认证中心的登录入口进行登录，登录时带上自己的地址，子系统只接受认证中心的授权，授权通过令牌（token）实现，sso认证中心验证用户的用户名密码正确，创建全局会话和token，token作为参数发送给各个子系统，子系统拿到token，即得到了授权，可以借此创建局部会话，局部会话登录方式与单系统的登录方式相同。</span><br></pre></td></tr></table></figure>
<h2 id="单点登录的实现方式？"><a href="#单点登录的实现方式？" class="headerlink" title="单点登录的实现方式？"></a>单点登录的实现方式？</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>通过分布式session</span><br><span class="line">如果是通过浏览器页面传递信息，前端拿到用户信息后，可以调用 B系统 服务端接口进行登录，与B系统建立会话。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>如果是传递到 B系统 后端服务器，需要在服务器进行登录，然后带上用户信息重定向到B系统前端页面，这时候建立会话完成。</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>在前后端分离的情况下，我们一般采用第一种方式进行数据传递。</span><br><span class="line"></span><br><span class="line">面试官：“从你的两种方案中，不管是浏览器层面的跳转，还是后端重定向，都需要带上用户信息。如果是方式<span class="number">1</span>，那么这个用户信息放在哪里呢，是<span class="variable constant_">URL</span>链接还是其他地方”。</span><br><span class="line"></span><br><span class="line">我：既然是通过浏览器传递数据，有两种方式，第一种是通过在<span class="title class_">Url</span>上拼接参数，比如 <span class="attr">http</span>:<span class="comment">//www.baidu.com?userId=123 。</span></span><br><span class="line"></span><br><span class="line">第二种是通过<span class="title class_">Cookie</span>的形式传递，但是由于<span class="title class_">Cookie</span>不能跨域，就导致了部分局限性。</span><br><span class="line"></span><br><span class="line">安全性如何保证：</span><br><span class="line">身为一个对自我要求很高的程序员，这肯定难不倒我。保证数据的安全性总的来说有几种实现：</span><br><span class="line"></span><br><span class="line">从软件层面上进行保证，比如说可见性等。</span><br><span class="line">通过加密算法对数据进行加密。</span><br><span class="line">因为从浏览器层面保证数据不可见不太现实，所以可以对数据进行加密，并且这个数据加解密的过程应该由服务端来实现。</span><br><span class="line"></span><br><span class="line">比如：用户在 系统A 登录后，系统A 的服务端通过某种加密算法以及某个秘钥对用户数据进行加密，接着返回给前端。系统A 页面跳转到系统B时带上这个加密信息，接着调用系统B服务端接口进行登录。系统B 通过解密数据获取登录者的用户信息进行登录即可。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">你们的单点登录具体是如何实现的？</span><br><span class="line">“重头戏来了”，因为我们所有系统的顶级域名都是一样的，因此不会存在跨域问题。为了降低接入成本，我们采用的是 <span class="title class_">Cookie</span>加密 的形式。</span><br><span class="line"></span><br><span class="line">比如用户在 系统A 登录后，系统A会往浏览器中写入<span class="title class_">Cookie</span>, <span class="title class_">Key</span> 为userInfo，value值为用户A的accountId。当然这个accountId是加密过的。</span><br><span class="line"></span><br><span class="line">然后用户在访问系统B的页面时，由于属于同一个顶级域名，会带上 <span class="title class_">Cookie</span>。调用系统B接口时，判断 <span class="title class_">Cookie</span>中存在用户信息，如果存在，通过<span class="title class_">Secret</span>进行解密获取用户的accountId，随后把用户数据放到<span class="title class_">Session</span>中，从而进行登录。</span><br><span class="line"></span><br><span class="line">这样做还有一个好处就是：用户可以直接在浏览器中输入域名进行跳转，而不是需要在 系统A 点击跳转到系统B。毕竟一般的用户都是把链接保存在书签的</span><br><span class="line"></span><br><span class="line">加密的<span class="title class_">Secret</span>是怎么实现的？</span><br><span class="line">我们的<span class="title class_">Secret</span>采用的是系统约定的形式，我猜面试官肯定会想<span class="title class_">Secret</span>全都一样会不会不安全。</span><br><span class="line"></span><br><span class="line">这个值在系统中以加密的形式进行存储，并且使用的配置中心，再加上我们系统使用的是专用网络，基本不存在泄漏的风险。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">用户登录的时效性怎么保证？</span><br><span class="line">我：在单系统条件下，如果是标准的 <span class="title class_">Cookie</span>-<span class="title class_">Session</span> 机制，用户登录后调用接口，这个 <span class="title class_">Session</span> 会进行续签，从而让会话保持下去。会话的生命周期变成了主要由服务端来保证</span><br><span class="line"></span><br><span class="line">但是通过目前的这种形式，通过<span class="title class_">Cookie</span>中是否存在用户信息判断是否登录，会出现一个情况就是只要这个用户信息也就是<span class="title class_">Cookie</span>一直存在，那么用户就永远不会退出。（因为我们只会对数据进行解密，并且用户在登录后，<span class="title class_">Cookie</span>并不会设置有效期），也就是说这个会话的生命周期变成了由 <span class="title class_">Cookie</span> 来保证。</span><br><span class="line"></span><br><span class="line">所以我们有两种方案，一种是对 <span class="title class_">Cookie</span> 添加过期时间，比如 <span class="number">30</span> 分钟，只要<span class="title class_">Cookie</span>消失了，说明用户登录状态失效。第二种是在userInfo这个<span class="title class_">Cookie</span>的<span class="title class_">Value</span>值中添加过期信息，然后每次接口调用时服务端判断是否超时。</span><br><span class="line"></span><br><span class="line">还有其他解决方案：</span><br><span class="line">我：就知道你要问这个。我们可以把系统A 和 系统B 的用户会话信息由服务端控制，进行统一控制。比如使用<span class="title class_">Spring</span>-<span class="title class_">Session</span>方案，使用同一个 <span class="title class_">Redis</span>。这样的话用户在系统A登录后，将用户会话信息保存在<span class="title class_">Redis</span>中。然后在打开系统B时，</span><br><span class="line">因为<span class="title class_">Cookie</span>同域，调用 系统B 接口时，上传的是同一个<span class="title class_">SessionId</span>，系统B从<span class="title class_">Redis</span>中判断用户已经登录了，返回登录成功，进行续签。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">面试官：这样一来，系统A 和 系统B 都会存在很多相同的后端代码，一个改动其他系统也要跟着改。到时候如果有很多个系统，修改成本是不是太大了？</span><br><span class="line"></span><br><span class="line">我：确实是的。所以我们可以把 系统A 和 系统B 的那些代码搞成个服务端的认证中心，这样一来不是方便多了。而且<span class="title class_">Cookie</span>始终有着跨域的问题。按照这个思路，我是不是可以把前端页面也搞成同一个，形成认证中心的前端页面。</span><br><span class="line"></span><br><span class="line">“等等，这不就是<span class="variable constant_">CAS</span>的设计思路嘛”</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>项目的基本需求</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="http://example.com/2023/01/06/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%9C%80%E6%B1%82/">http://example.com/2023/01/06/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%9C%80%E6%B1%82/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>后来~</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2023-01-06</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2023-01-04</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vue2%E7%9A%84%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/">vue2的相关问题</a></div><div class="post_share"><div class="social-share" data-image="https://source.fomal.cc/img/default_cover_10.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css" media="print" onload="this.media='all'"><script src="https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js" defer></script></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/01/06/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" title="前端的面试题"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_3.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-06</div><div class="title">前端的面试题</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.imgdb.cn/item/63b77d4fbe43e0d30e84900b.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">后来~</div><div class="author-info__description">Lin的小窝</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/tkl-rose"><i></i><span>🛴前往小家...</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://gitee.com/tang-kunlin" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1311062919@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget" id="newYear"><div class="item-headline"><i></i><span></span></div><div class="item-content"><div id="newYear-main"><div class="mask"></div> <p class="title"></p> <div class="newYear-time"></div> <p class="today" style="text-align: right;"></p> </div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-text">项目的一些基本操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">后台管理项目的基本流程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA"><span class="toc-text">1.项目构建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%99%BB%E5%BD%95%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-text">2.登录的过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%A6%96%E9%A1%B5%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-text">3.首页的过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BA%8C%E7%BA%A7%E8%B7%AF%E7%94%B1%E7%9A%84%E7%BC%96%E5%86%99-%E5%AD%A6%E7%94%9F%E5%88%97%E8%A1%A8"><span class="toc-text">4.二级路由的编写(学生列表)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BF%A1%E6%81%AF%E5%88%97%E8%A1%A8%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-text">5.信息列表的增删改查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%AF%B9%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E8%BF%9B%E8%A1%8C%E5%B0%81%E8%A3%85%E5%87%8F%E5%B0%91%E9%87%8D%E5%A4%8D%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-text">6.对增删改查进行封装减少重复的代码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD"><span class="toc-text">移动端的搜索功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%B9%A6%E5%86%99%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2%EF%BC%8C%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="toc-text">1.书写静态页面，历史记录</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Axios%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">Axios的实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%80%8E%E4%B9%88%E5%8E%BB%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85axios%EF%BC%8C%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8%E9%87%8C%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%E6%80%8E%E4%B9%88%E5%86%99%E7%9A%84"><span class="toc-text">1.怎么去实现的二次封装axios，请求拦截器里面的代码怎么写的</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vuex"><span class="toc-text">Vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8vuex%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">实际项目中使用vuex的应用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue%E7%9A%84%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC"><span class="toc-text">vue的组件传值</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-text">父子之间通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#props"><span class="toc-text">props:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sync"><span class="toc-text">.sync:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-modul%EF%BC%9A"><span class="toc-text">v-modul：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#children-parent"><span class="toc-text">$children&#x2F;$parent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E5%90%91%E7%88%B6%E4%BC%A0%E5%80%BC"><span class="toc-text">子向父传值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ref"><span class="toc-text">ref:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#emit-v-on"><span class="toc-text">$emit&#x2F;v-on</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B7%E5%AD%99%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-text">爷孙之间通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#attrs-listeners"><span class="toc-text">$attrs&#x2F;$listeners</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#provide-inject"><span class="toc-text">provide&#x2F;inject</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%84%E5%BC%9F%E4%B9%8B%E9%97%B4%E4%BC%A0%E5%80%BC%EF%BC%8C%E4%BB%BB%E6%84%8F%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E9%83%BD%E5%8F%AF%E4%BB%A5%E4%BC%A0%E5%80%BC"><span class="toc-text">兄弟之间传值，任意组件之间都可以传值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EventBus"><span class="toc-text">EventBus</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vuex-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">Vuex:状态管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sort%E6%8F%92%E6%A7%BD%EF%BC%9A"><span class="toc-text">sort插槽：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%88%86%E9%A1%B5%E5%8A%9F%E8%83%BD"><span class="toc-text">封装分页功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87ui%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8C%E5%B0%81%E8%A3%85"><span class="toc-text">通过ui框架进行封装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%89%8B%E5%86%99%E5%88%86%E9%A1%B5%E7%9A%84%E5%B0%81%E8%A3%85"><span class="toc-text">通过手写分页的封装</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%BB%9A%E5%8A%A8%E9%95%BF%E5%88%97%E8%A1%A8%E7%9A%84%E4%BC%98%E5%8C%96"><span class="toc-text">虚拟滚动长列表的优化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Vue-virtual-Scroller"><span class="toc-text">1.Vue-virtual-Scroller</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#webpack%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">webpack的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85webpack"><span class="toc-text">安装webpack?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEwebpack"><span class="toc-text">配置webpack</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#loader%E5%92%8Cplugin%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">loader和plugin的应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%9B%BE%E7%89%87%E9%9F%B3%E9%A2%91%E8%A7%86%E9%A2%91%E7%AD%89"><span class="toc-text">打包图片音频视频等</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87"><span class="toc-text">打包字体图标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E6%89%93%E5%8C%85css%E6%96%87%E4%BB%B6"><span class="toc-text">压缩打包css文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E9%A1%B9%E7%9B%AE%E5%8E%8B%E7%BC%A9"><span class="toc-text">打包项目压缩</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E8%A1%A8%E5%8D%95%E9%87%8D%E5%A4%8D%E6%8F%90%E4%BA%A4%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">解决表单重复提交的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E7%94%9F%E7%9A%84%E6%8B%96%E6%8B%BD%E9%83%A8%E5%88%86"><span class="toc-text">原生的拖拽部分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%80%92%E8%AE%A1%E6%97%B6%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">倒计时的实现</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Echarts%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">Echarts的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#echarts%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-text">echarts的用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%B0%E5%9B%BE"><span class="toc-text">地图</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#thress-js%E5%B1%95%E7%A4%BA3d%E7%8E%AF%E7%BB%95%E6%95%88%E6%9E%9C"><span class="toc-text">thress.js展示3d环绕效果</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#thress%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">thress的应用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95"><span class="toc-text">单点登录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%EF%BC%9F"><span class="toc-text">什么是单点登录？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E7%9A%84%E5%8E%9F%E7%90%86%EF%BC%9F"><span class="toc-text">单点登录的原理？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%9F"><span class="toc-text">单点登录的实现方式？</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">格言🧬</p><div class="bg-ad"><div>再看看那个光点，它就在这里，这是家园，这是我们 —— 你所爱的每一个人，你认识的一个人，你听说过的每一个人，曾经有过的每一个人，都在它上面度过他们的一生✨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://tkl-rose.github.io/">点击开启星辰之旅</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">猜你想看💡</p><ul class="ft-links"><li><a href="/posts/eec9786.html">魔改指南</a><a href="/box/nav/">网址导航</a></li><li><a href="/social/link/">我的朋友</a><a href="/comments/">留点什么</a></li><li><a href="/personal/about/">关于作者</a><a href="/archives/">文章归档</a></li><li><a href="/categories/">文章分类</a><a href="/tags/">文章标签</a></li><li><a href="/box/Gallery/">我的画廊</a><a href="/personal/bb/">我的唠叨</a></li><li><a href="/site/time/">建设进程</a><a href="/site/census/">网站统计</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">推荐友链⌛</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="Fomalhaut🥝"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/60e5d4e39da7c077.webp" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://tzy1997.com/" title="唐志远の博客"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/4ab83cdce942463b.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://akilar.top/" title="Akilarの糖果屋"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/6bf1ed05796db59c.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://butterfly.js.org/" title="Butterfly"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/64cc6a7d508026e1.png" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://anzhiy.cn/" title="安知鱼"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/1b33fef8f5fb7e63.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.acozycotage.net/" title="Acozycotage"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/6a6fe6ebfd19c465.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://cdn.netdun.net/" title="网盾星球"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/70dee3f9d1ca10f3.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2023</b></span><span><b>&nbsp;&nbsp;By 后来~</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v4.3.1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="本站采用多线部署，主线路托管于Vercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="本站数据分析得益于51la技术支持"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Analytics-51la-3db1eb.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="本站已加入萌ICP豪华套餐，萌ICP备20226665号"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/萌ICP备-20226665-fe1384.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="本网站经Service Worker分流至缤纷云对象存储"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Bucket-缤纷云-9c62da.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="本站使用网盾星球提供CDN加速与防护"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-网盾星球-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="本网站源码由Github提供存储仓库"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"></button><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'B7Seoe291a3TSH7N3WXPgyts-gzGzoHsz',
      appKey: 'w9VsgonWd2d7eYE33EEtQObG',
      avatar: '',
      serverURLs: 'https://b7seoe29.lc-cn-n1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdnjs.cloudflare.com/ajax/libs/valine/1.5.1/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer src="/js/light.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/cursor.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script defer data-pjax src="/js/emoji.js"></script><script async src="https://npm.elemecdn.com/tzy-blog/lib/js/other/sakura.js"></script><script defer src="/js/runtime.js"></script><script async src="/js/fps.js"></script><script async src="/js/title.js"></script><canvas id="snow"></canvas><script async src="/js/snow.js"></script><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async data-pjax src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><script async data-pjax src="/js/newYear.js"></script><script id="click-heart" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><a class="magnet_link_more"  href="http://example.com/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #69e8f2}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/01/06/前端面试题/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_3.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-01-06</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/01/06/前端面试题/&quot;);" href="javascript:void(0);" alt="">前端的面试题</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/01/06/前端面试题/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/01/06/项目的基本需求/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_10.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-01-06</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/01/06/项目的基本需求/&quot;);" href="javascript:void(0);" alt="">项目的基本需求</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/01/06/项目的基本需求/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_43.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/前端/&quot;);" href="javascript:void(0);">前端</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">前端代码</span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '1s');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '2');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/about/'|| '/about/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://gitcalendar.fomal.cc/api?Fomalhaut-Blog",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'Fomalhaut-Blog')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body></html>